# Input Components Usage Guide

## Overview

The Acutrack Design System provides a comprehensive set of input components that follow industry-standard patterns for accessibility, usability, and design consistency. This guide covers all input components and their usage patterns.

## Full-Width Behavior

All form control components in the Acutrack Design System automatically take the full width of their parent containers by default. This ensures consistent, professional layouts across all form components.

### Consistent Width Behavior
- **Input Components**: Input, PasswordInput, NumberInput, Textarea all use `w-full` by default
- **Select Components**: Select, MultiSelect, Autocomplete all use `w-full` by default  
- **Date Components**: DatePicker, DateRangePicker, EnhancedDatePicker all use `w-full` by default

### Dropdown and Select Panel Sizing (v1.0.70)

While the trigger components (like `Select`) are full-width, the dropdown panels have intelligent sizing to prevent content from being truncated:

- **Minimum Width**: The panel will always be at least as wide as the trigger component.
- **Maximum Width**: The panel will expand to fit its widest content (`width: max-content`).

This ensures that even long option text is fully visible without compromising the layout.

```tsx
// ✅ The panel will expand to show the full text of the long option.
<Select
  label="Country"
  options={[
    { value: 'us', label: 'United States' },
    { value: 'uk', label: 'United Kingdom of Great Britain and Northern Ireland' }
  ]}
/>
```

## Components

### 1. Input Component

The basic text input component with extensive customization options.

#### Basic Usage
```tsx
import { Input } from '@acutrack/ds';

<Input
  id="email"
  label="Email Address"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  placeholder="Enter your email"
  type="email"
  required
/>
```

#### Advanced Features
- **Validation**: Built-in validation with custom validation functions
- **Accessibility**: Full ARIA support with proper labeling
- **States**: Error, success, warning, loading, and disabled states
- **Sizes**: xs, sm, md, lg, xl
- **Variants**: primary (white background), secondary (light blue/tertiary), outline, ghost (transparent border by default; border on hover/focus), filled
- **Label mode**: `labelMode?: 'top' | 'floating'` — default `'top'` (label above). Use `'floating'` for label inside the field that floats up on focus or when the field has a value. Aligns with DatePicker.
- **Icons**: Left and right icon support (dimmed when disabled)
- **Character Count**: Optional character counting with limits

#### Label Mode (labelMode)

Use `labelMode="floating"` for a Material-style floating label that sits inside the field and moves up on focus or when the field has a value:

```tsx
<Input
  id="email"
  label="Email"
  labelMode="floating"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
/>
```

When floated, the label uses a small background patch so it sits cleanly above the border. Works with any variant (primary, secondary, ghost, etc.). **Textarea, PasswordInput, Select, NumberInput, and MultiSelect** also support `labelMode?: 'top' | 'floating'` with the same behavior.

#### Disabled State

When `disabled` or `loading` is true, the input uses a consistent disabled look across all variants:

- **Light mode**: Gray background (`bg-gray-100`), muted border (`border-gray-300`), dimmed text and placeholder. Label, helper text, and left/right icons use reduced opacity (70% for label/helper, 60% for icons).
- **Dark mode**: Darker background (`dark:bg-gray-900`), subdued border (`dark:border-gray-700`), dimmed text, and `dark:opacity-85` on the container so the control clearly recedes.
- **Cursor**: The whole control (label + input + helper) shows `cursor-not-allowed` when disabled.

#### Enhanced Features
```tsx
<Input
  id="password"
  label="Password"
  value={password}
  onChange={(e) => setPassword(e.target.value)}
  type="password"
  required
  validate={(value) => value.length < 8 ? 'Password must be at least 8 characters' : undefined}
  validateOnBlur
  showCharacterCount
  maxCharacters={50}
  leftIcon={<Icon>lock</Icon>}
  rightIcon={<Icon>visibility</Icon>}
  ariaLabel="Enter your password"
  helperText="Password must be at least 8 characters long"
/>
```

### 2. PasswordInput Component

Specialized password input with security features.

#### Basic Usage
```tsx
import { PasswordInput } from '@acutrack/ds';

<PasswordInput
  id="password"
  label="Password"
  value={password}
  onChange={setPassword}
  showPasswordStrength
  showPasswordRequirements
  passwordRequirements={{
    minLength: 8,
    requireUppercase: true,
    requireLowercase: true,
    requireNumbers: true,
    requireSpecialChars: true
  }}
/>
```

#### Security Features
- **Password Strength Indicator**: Visual strength meter
- **Password Requirements**: Configurable requirements display
- **Breach Detection**: Optional breach detection warning
- **Password History**: Warning for previously used passwords
- **Visibility Toggle**: Show/hide password functionality
- **Clean UI**: Eye icon (visibility toggle) button has no focus ring for cleaner appearance

### 3. Textarea Component

Multi-line text input with auto-resize capabilities.

#### Basic Usage
```tsx
import { Textarea } from '@acutrack/ds';

<Textarea
  id="description"
  label="Description"
  value={description}
  onChange={(e) => setDescription(e.target.value)}
  rows={4}
  placeholder="Enter description..."
  hasAutoResize
  showCharacterCount
  maxCharacters={500}
/>
```

#### Features
- **Auto-resize**: Automatically adjusts height based on content
- **Character Count**: Optional character counting
- **Resizable**: User can manually resize
- **Validation**: Same validation features as Input component

### 4. Select Component

Dropdown selection component with search and grouping.

#### Basic Usage
```tsx
import { Select, SelectOption } from '@acutrack/ds';

const options: SelectOption[] = [
  { value: 'option1', label: 'Option 1', description: 'First option' },
  { value: 'option2', label: 'Option 2', description: 'Second option' },
  { value: 'option3', label: 'Option 3', description: 'Third option', isDisabled: true },
];

<Select
  id="country"
  label="Country"
  options={options}
  value={selectedCountry}
  onChange={setSelectedCountry}
  placeholder="Select a country..."
  isSearchable
  isClearable
  showDescriptions
/>
```

#### Search Functionality

The Select component supports two search modes:

**1. Searchable Select (`isSearchable={true}`)**
- Adds a search input inside the dropdown
- Click to open dropdown, then search in separate input
- Traditional dropdown UX with search capability
- Perfect for long lists where you want to maintain dropdown behavior

```tsx
<Select
  id="product"
  label="Select Product"
  options={productOptions}
  value={selectedProduct}
  onChange={setSelectedProduct}
  placeholder="Click to open..."
  isSearchable={true}
  searchPlaceholder="Search products..."
  showDescriptions={true}
  maxDropdownHeight="20rem"
/>
```

**2. Typeable Select (`allowTyping={true}`)**
- Type directly in the select field itself
- No separate search input - the trigger field is typeable
- Filters options as you type
- More like Autocomplete, but with Select's selection behavior
- Perfect for quick selection from long lists
- **Value Persistence**: Selected value persists while typing - the display shows what you type, but the underlying value only changes when you explicitly select an option

```tsx
<Select
  id="product"
  label="Select Product"
  options={productOptions}
  value={selectedProduct}
  onChange={setSelectedProduct}
  placeholder="Type to search products..."
  allowTyping={true}
  showDescriptions={true}
  isClearable={true}
  maxDropdownHeight="20rem"
/>
```

**Behavior with allowTyping:**
- When you select a value (e.g., "medium"), it's stored and persists
- When you start typing, the display shows your typed text for filtering
- The selected value remains unchanged until you explicitly select a new option
- If you type but don't select, on blur the display reverts to the selected value
- Press Enter to select the first filtered option

**When to Use Each:**
- **`isSearchable`**: Use when you want traditional dropdown UX with search inside
- **`allowTyping`**: Use when you want quick typing directly in the field (similar to Autocomplete)

#### Advanced Features
- **Search**: Built-in search functionality with two modes (`isSearchable` and `allowTyping`)
- **Grouping**: Option grouping support
- **Custom Rendering**: Custom option renderer
- **Loading States**: Loading state for async options (`isLoadingOptions`, `loadingText`)
- **Clear Button**: Optional clear selection button (`isClearable`)
- **Search Callback**: Track search terms with `onSearch` callback
- **No Options Text**: Custom message when no options match (`noOptionsText`)

### 5. Autocomplete Component

Input with type-ahead suggestions.

#### Basic Usage
```tsx
import { Autocomplete } from '@acutrack/ds';

<Autocomplete
  id="search"
  label="Search"
  options={searchOptions}
  value={searchValue}
  onChange={setSearchValue}
  placeholder="Type to search..."
  hasFiltering
  hasHighlighting
  showDescriptions
  maxOptions={10}
  minCharsToFilter={2}
/>
```

#### Features
- **Filtering**: Real-time option filtering
- **Highlighting**: Search term highlighting
- **Keyboard Navigation**: Full keyboard support
- **Custom Filtering**: Custom filter functions
- **Debouncing**: Configurable debounce delay

### 6. MultiSelect Component

Multi-selection dropdown with chips.

#### Basic Usage
```tsx
import { MultiSelect } from '@acutrack/ds';

<MultiSelect
  id="tags"
  label="Tags"
  options={tagOptions}
  selectedValues={selectedTags}
  onSelectedValuesChange={setSelectedTags}
  placeholder="Select tags..."
  hasSearch
  hasChips
  hasClearAll
  hasSelectAll
/>
```

#### Features
- **Chips Display**: Selected items shown as chips
- **Search**: Search within options
- **Select All/Clear All**: Bulk selection controls
- **Custom Chips**: Customizable chip appearance

### 7. Checkbox Component

Single and multi-selection checkboxes.

#### Basic Usage
```tsx
import { Checkbox } from '@acutrack/ds';

<Checkbox
  id="terms"
  label="I agree to the terms and conditions"
  checked={agreedToTerms}
  onChange={(e) => setAgreedToTerms(e.target.checked)}
  required
/>

// Indeterminate checkbox
<Checkbox
  id="select-all"
  label="Select All"
  checked={allSelected}
  isIndeterminate={someSelected}
  onChange={handleSelectAll}
/>
```

#### Features
- **Indeterminate State**: Three-state checkbox support
- **Custom Styling**: Full customization options
- **Accessibility**: Proper ARIA attributes

### 8. Radio Component

Single selection radio buttons.

#### Basic Usage
```tsx
import { Radio } from '@acutrack/ds';

<Radio
  id="option1"
  name="choice"
  label="Option 1"
  value="option1"
  isChecked={selectedOption === 'option1'}
  onChange={handleRadioChange}
/>

<Radio
  id="option2"
  name="choice"
  label="Option 2"
  value="option2"
  isChecked={selectedOption === 'option2'}
  onChange={handleRadioChange}
/>
```

### 9. ToggleSwitch Component

On/off toggle switch.

#### Basic Usage
```tsx
import { ToggleSwitch } from '@acutrack/ds';

<ToggleSwitch
  id="notifications"
  label="Enable Notifications"
  isChecked={notificationsEnabled}
  onChange={(e) => setNotificationsEnabled(e.target.checked)}
  showValue
  onLabel="ON"
  offLabel="OFF"
/>
```

### 10. DatePicker Component

Date selection with calendar popup.

#### Basic Usage
```tsx
import { DatePicker } from '@acutrack/ds';

<DatePicker
  id="birthdate"
  label="Birth Date"
  value={birthDate}
  onChange={setBirthDate}
  placeholder="Select date..."
  hasClearButton
  hasTodayButton
  minDate={new Date('1900-01-01')}
  maxDate={new Date()}
/>
```

#### Features
- **Calendar Popup**: Integrated calendar component
- **Date Restrictions**: Min/max date constraints
- **Quick Actions**: Today button, clear button
- **Keyboard Navigation**: Full keyboard support

### 11. FileUploader Component

Drag-and-drop file upload.

#### Basic Usage
```tsx
import { FileUploader } from '@acutrack/ds';

<FileUploader
  id="documents"
  label="Upload Documents"
  files={selectedFiles}
  onFilesChange={setSelectedFiles}
  multiple
  hasFilePreview
  hasFileValidation
  allowedFileTypes={['.pdf', '.doc', '.docx']}
  maxFileSize={5 * 1024 * 1024} // 5MB
/>
```

#### Features
- **Drag & Drop**: Visual drag-and-drop interface
- **File Validation**: Type and size validation
- **Preview**: File preview capabilities
- **Progress**: Upload progress indication
- **Multiple Files**: Support for multiple file selection

### 12. SearchBar Component

Advanced search input with suggestions.

#### Basic Usage
```tsx
import { SearchBar } from '@acutrack/ds';

<SearchBar
  id="global-search"
  placeholder="Search..."
  value={searchQuery}
  onChange={setSearchQuery}
  onSearch={handleSearch}
  hasSuggestions
  suggestions={searchSuggestions}
  hasClearButton
  hasSearchButton
  debounceDelay={300}
/>
```

#### Features
- **Suggestions**: Real-time search suggestions
- **Debouncing**: Configurable debounce delay
- **Keyboard Navigation**: Full keyboard support
- **Expandable**: Optional expandable search
- **Voice Search**: Optional voice search integration

### 13. Slider Component

Range input slider.

#### Basic Usage
```tsx
import { Slider } from '@acutrack/ds';

<Slider
  id="volume"
  label="Volume"
  value={volume}
  onChange={handleVolumeChange}
  min={0}
  max={100}
  step={1}
  showValue
  showMarks
  marks={[
    { value: 0, label: 'Min' },
    { value: 50, label: 'Mid' },
    { value: 100, label: 'Max' }
  ]}
/>
```

## Industry Standards Compliance

### Accessibility (WCAG 2.1 AA)
- **Keyboard Navigation**: All components support full keyboard navigation
- **Screen Reader Support**: Proper ARIA labels, descriptions, and roles
- **Focus Management**: Visible focus indicators and logical tab order
- **Color Contrast**: Meets WCAG contrast requirements
- **Error Handling**: Proper error announcement and association

### Form Validation
- **Real-time Validation**: Optional real-time validation with debouncing
- **Custom Validators**: Support for custom validation functions
- **Error Display**: Clear error messaging with proper ARIA attributes
- **Success States**: Visual feedback for successful validation

### Performance
- **Debounced Input**: Configurable debouncing for search and validation
- **Lazy Loading**: Support for lazy-loaded options in select components
- **Virtual Scrolling**: For large option lists (planned)
- **Memoization**: Optimized re-rendering

### Internationalization
- **RTL Support**: Right-to-left language support
- **Localization**: Date formatting and number formatting
- **Accessibility**: Proper language attributes

## Best Practices

### 1. Form Layout
```tsx
// Use consistent spacing and grouping
<div className="space-y-6">
  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
    <Input id="firstName" label="First Name" required />
    <Input id="lastName" label="Last Name" required />
  </div>
  
  <Input id="email" label="Email" type="email" required />
  
  <PasswordInput 
    id="password" 
    label="Password" 
    showPasswordStrength 
    showPasswordRequirements 
  />
</div>
```

### 2. Error Handling
```tsx
// Provide clear, actionable error messages
<Input
  id="email"
  label="Email"
  value={email}
  onChange={setEmail}
  error={emailError}
  validate={(value) => {
    if (!value) return 'Email is required';
    if (!/\S+@\S+\.\S+/.test(value)) return 'Please enter a valid email address';
    return undefined;
  }}
  validateOnBlur
/>
```

### 3. Loading States
```tsx
// Show loading states for async operations
<Select
  id="country"
  label="Country"
  options={countries}
  value={selectedCountry}
  onChange={setSelectedCountry}
  isLoading={loadingCountries}
  loadingText="Loading countries..."
/>
```

### 4. Accessibility
```tsx
// Always provide proper labels and descriptions
<Input
  id="username"
  label="Username"
  ariaLabel="Enter your username"
  ariaDescribedBy="username-help"
  helperText="Choose a unique username"
/>
```

## Testing

The input components test page (`input-components-test.html`) provides comprehensive testing for all components including:

- **State Testing**: All component states (default, disabled, error, success, warning, loading)
- **Size Testing**: All size variations (xs, sm, md, lg, xl)
- **Variant Testing**: All visual variants
- **Interaction Testing**: User interactions and form submission
- **Accessibility Testing**: Keyboard navigation and screen reader support
- **Validation Testing**: Form validation and error handling

## Migration Guide

### From Basic HTML Inputs
```tsx
// Before
<input type="text" placeholder="Enter name" />

// After
<Input
  id="name"
  label="Name"
  placeholder="Enter name"
  required
/>
```

### From Other Design Systems
The components follow standard patterns and should be easy to migrate from other design systems. Key differences:
- Consistent prop naming (e.g., `isDisabled` instead of `disabled`)
- Enhanced accessibility features
- Built-in validation support
- Comprehensive theming options

## Support

For questions or issues with input components:
1. Check the test page for examples
2. Review the component documentation
3. Check the accessibility guidelines
4. Contact the design system team



