# Width System Usage Guide

## Overview

The Acutrack Design System v1.0.65+ introduces a comprehensive width standardization system that provides consistent, responsive width control across all form components and interactive elements. This system ensures predictable layouts, better mobile responsiveness, and improved developer experience with explicit default control options.

## Table of Contents

1. [Quick Start](#quick-start)
2. [Width System Overview](#width-system-overview)
3. [Supported Components](#supported-components)
4. [Width Options](#width-options)
5. [Advanced Usage](#advanced-usage)
6. [Responsive Behavior](#responsive-behavior)
7. [Best Practices](#best-practices)
8. [Migration Guide](#migration-guide)
9. [Troubleshooting](#troubleshooting)

## Quick Start

### Basic Width Control
```tsx
import { Input, Button, Select } from '@acutrack-bookprint/acutrack-ds';

function MyForm() {
  return (
    <div className="space-y-4">
      {/* Small width */}
      <Input width="sm" placeholder="Small input" />
      
      {/* Medium width (default) */}
      <Input width="md" placeholder="Medium input" />
      
      {/* Large width */}
      <Input width="lg" placeholder="Large input" />
      
      {/* Full width */}
      <Input width="full" placeholder="Full width input" />
      
      {/* Auto width with constraints */}
      <Input width="auto" placeholder="Auto width input" />
    </div>
  );
}
```

## Width System Overview

### Core Principles

1. **Separation of Concerns**: `size` controls height/padding, `width` controls horizontal sizing
2. **Consistent API**: Same width props across all components
3. **Safe Defaults**: All components have sensible minimum and maximum widths
4. **Responsive Design**: Width system works seamlessly with responsive breakpoints
5. **Developer Flexibility**: Inline overrides for custom requirements

### Width Tokens

The system uses predefined Tailwind CSS tokens:

```css
/* Width Tokens */
width-sm: 8rem;      /* 128px */
width-md: 12rem;     /* 192px */
width-lg: 16rem;     /* 256px */
width-full: 100%;    /* Full container width */
width-auto: auto;    /* Content-based width */

/* Safe Constraints */
min-width: 8rem;     /* 128px minimum */
max-width: 100%;     /* Container maximum */
```

## Supported Components

### Form Components
- **Input**: Text input fields with icon support
- **PasswordInput**: Password fields with toggle visibility
- **NumberInput**: Numeric input with increment/decrement controls
- **Select**: Dropdown selection components
- **Autocomplete**: Searchable dropdown with suggestions
- **DatePicker**: Date selection component
- **DateRangePicker**: Date range selection
- **SearchBar**: Search input with submit functionality
- **FileUploader**: File upload component

### Interactive Components
- **Button**: Action buttons with various variants
- **Pagination**: Page navigation controls

### Layout Components
- **Checkbox**: Form checkboxes
- **RadioGroup**: Radio button groups

## Width Options

### Standard Width Options

| Option | Value | Use Case | Example |
|--------|-------|----------|---------|
| `none` | Default behavior | Explicit default control | When you want to be intentional about default behavior |
| `sm` | `8rem` (128px) | Compact forms, mobile | Login forms, search filters |
| `md` | `12rem` (192px) | Standard forms | Contact forms, settings |
| `lg` | `16rem` (256px) | Spacious forms | Registration forms, data entry |
| `full` | `100%` | Full-width layouts | Dashboard filters, search bars |
| `auto` | `auto` | Content-based | Dynamic content, flexible layouts |

### Default Behavior

**Form Components** (Input, Select, etc.):
- **No prop**: `w-full` (takes full width of parent)
- **`width="none"`**: `w-full` (explicit default)

**Button Components**:
- **No prop**: `w-auto` (content-based width)
- **`width="none"`**: `w-auto` (explicit default)

### Inline Overrides

```tsx
// Custom width with inline styles
<Input 
  width="auto" 
  style={{ width: '300px' }} 
  placeholder="Custom width"
/>

// Min/Max width constraints
<Input 
  width="md" 
  minWidth="10rem" 
  maxWidth="20rem" 
  placeholder="Constrained width"
/>
```

## Advanced Usage

### Explicit Default Control with `width="none"`

The `width="none"` option provides explicit control over default behavior, useful when you want to be intentional about using default width settings.

```tsx
function ExplicitDefaults() {
  return (
    <div className="space-y-4">
      {/* These are identical */}
      <Input placeholder="Email" />
      <Input width="none" placeholder="Email" />
      
      {/* These are identical */}
      <Button>Save</Button>
      <Button width="none">Save</Button>
      
      {/* When you need explicit control */}
      <Input 
        width="none" 
        placeholder="Explicit default width"
        style={{ minWidth: '200px' }}
      />
    </div>
  );
}
```

### When to Use `width="none"`

- **Explicit Intent**: When you want to make it clear you're using default behavior
- **Dynamic Width**: When width is determined by other props or conditions
- **Future-Proofing**: When you want explicit control that won't change if defaults change
- **Code Clarity**: When working in teams where explicit is preferred over implicit

### Component-Specific Examples

#### Input Components
```tsx
function FormExample() {
  return (
    <div className="space-y-4">
      {/* Standard form */}
      <Input width="md" placeholder="Email" />
      <PasswordInput width="md" placeholder="Password" />
      
      {/* Compact mobile form */}
      <div className="flex space-x-2">
        <Input width="sm" placeholder="First name" />
        <Input width="sm" placeholder="Last name" />
      </div>
      
      {/* Full-width search */}
      <SearchBar width="full" placeholder="Search products..." />
    </div>
  );
}
```

#### Button Groups
```tsx
function ButtonExample() {
  return (
    <div className="space-y-4">
      {/* Individual buttons */}
      <Button width="sm">Save</Button>
      <Button width="md">Submit</Button>
      
      {/* Full-width buttons (stack vertically) */}
      <div className="space-y-2">
        <Button width="full">Primary Action</Button>
        <Button width="full" variant="secondary">Secondary Action</Button>
      </div>
    </div>
  );
}
```

#### Form Layouts
```tsx
function ResponsiveForm() {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      {/* Mobile: full width, Desktop: half width */}
      <Input width="full" placeholder="First Name" />
      <Input width="full" placeholder="Last Name" />
      
      {/* Always full width */}
      <Input width="full" placeholder="Email" className="md:col-span-2" />
    </div>
  );
}
```

## Responsive Behavior

### Mobile-First Approach

The width system is designed with mobile-first principles:

```tsx
function ResponsiveExample() {
  return (
    <div className="space-y-4">
      {/* Mobile: compact, Desktop: spacious */}
      <Input 
        width="sm" 
        className="md:w-md" 
        placeholder="Responsive input"
      />
      
      {/* Mobile: stacked, Desktop: inline */}
      <div className="flex flex-col md:flex-row gap-2">
        <Input width="full" placeholder="Mobile: full, Desktop: flex" />
        <Button width="full" className="md:w-auto">Action</Button>
      </div>
    </div>
  );
}
```

### Breakpoint Considerations

- **Mobile (< 768px)**: Prefer `sm` or `full` widths
- **Tablet (768px - 1024px)**: Use `md` or `lg` widths
- **Desktop (> 1024px)**: All width options work well

## Best Practices

### 1. Choose Appropriate Widths

```tsx
// ✅ Good: Appropriate width for content
<Input width="sm" placeholder="Age" />           // Short input
<Input width="md" placeholder="Email address" />  // Standard input
<Input width="lg" placeholder="Full name" />      // Longer input

// ❌ Avoid: Mismatched width and content
<Input width="sm" placeholder="Very long placeholder text that doesn't fit" />
```

### 2. Consistent Form Layouts

```tsx
// ✅ Good: Consistent widths in forms
function ContactForm() {
  return (
    <div className="space-y-4">
      <Input width="md" placeholder="Name" />
      <Input width="md" placeholder="Email" />
      <Input width="md" placeholder="Phone" />
      <Button width="md">Submit</Button>
    </div>
  );
}
```

### 3. Responsive Design Patterns

```tsx
// ✅ Good: Responsive width patterns
function SearchInterface() {
  return (
    <div className="flex flex-col sm:flex-row gap-2">
      <SearchBar width="full" placeholder="Search..." />
      <Button width="auto" className="sm:w-auto">Search</Button>
    </div>
  );
}
```

### 4. Full-Width Layouts

```tsx
// ✅ Good: Full-width for dashboard elements
function DashboardFilters() {
  return (
    <div className="space-y-4">
      <SearchBar width="full" placeholder="Search all data..." />
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <Select width="full" placeholder="Category" />
        <Select width="full" placeholder="Status" />
        <Select width="full" placeholder="Date Range" />
      </div>
    </div>
  );
}
```

## Migration Guide

### From v1.0.63 to v1.0.64

#### Before (Old System)
```tsx
// Old: Inconsistent width handling
<Input className="w-64" placeholder="Input" />
<Button className="w-full" onClick={handleClick}>Button</Button>
<Select className="min-w-48" options={options} />
```

#### After (New System)
```tsx
// New: Consistent width system
<Input width="lg" placeholder="Input" />
<Button width="full" onClick={handleClick}>Button</Button>
<Select width="md" options={options} />
```

#### Component-Specific Changes

1. **Input Components**: Added `width`, `minWidth`, `maxWidth` props
2. **Button Components**: Added width control with text truncation
3. **Form Components**: Consistent width API across all components
4. **Default Behavior**: Changed from `fullWidth={true}` to `width="auto"`

### Migration Steps

1. **Update Imports**: No changes needed
2. **Replace className width**: Use `width` prop instead of `className` width classes
3. **Update Defaults**: Change `fullWidth={true}` to `width="full"`
4. **Test Responsiveness**: Verify mobile and desktop layouts
5. **Update Custom Styles**: Use `style` prop for custom widths

## Troubleshooting

### Common Issues

#### 1. Icons Not Staying Within Component Bounds

**Problem**: PasswordInput eye icon appears outside component on small widths.

**Solution**: This is fixed in v1.0.64. The internal input element uses `w-full` while the container controls the width.

```tsx
// ✅ Fixed: Icons stay within bounds
<PasswordInput width="sm" placeholder="Password" />
```

#### 2. Text Overflow in Buttons

**Problem**: Button text overflows when using small widths.

**Solution**: Text is automatically truncated with ellipsis.

```tsx
// ✅ Good: Text truncation
<Button width="sm">Very Long Button Text</Button> // Shows: "Very Long But..."
```

#### 3. Full-Width Components Not Stacking

**Problem**: Full-width buttons display horizontally instead of vertically.

**Solution**: Use proper container layout.

```tsx
// ✅ Good: Vertical stacking for full-width buttons
<div className="space-y-2">
  <Button width="full">Button 1</Button>
  <Button width="full">Button 2</Button>
</div>
```

#### 4. Width Not Applying

**Problem**: Width prop not affecting component appearance.

**Solution**: Check for conflicting CSS classes and ensure proper prop usage.

```tsx
// ❌ Avoid: Conflicting width classes
<Input width="md" className="w-full" />

// ✅ Good: Use width prop only
<Input width="md" />
```

### Performance Considerations

1. **Avoid Frequent Width Changes**: Minimize dynamic width changes to prevent re-renders
2. **Use Fixed Widths**: Prefer fixed width options over dynamic calculations
3. **Test on Mobile**: Always test width behavior on actual mobile devices
4. **Monitor Bundle Size**: Width system adds minimal overhead to bundle size

## API Reference

### Width Props

```typescript
interface WidthProps {
  width?: 'sm' | 'md' | 'lg' | 'full' | 'auto';
  minWidth?: string | number;
  maxWidth?: string | number;
  style?: React.CSSProperties;
}
```

### Component-Specific Props

All supported components accept the `WidthProps` interface in addition to their existing props.

### Tailwind Classes Generated

The width system generates the following Tailwind classes:

- `w-sm`, `w-md`, `w-lg`, `w-full`, `w-auto`
- `min-w-24` (default minimum)
- `max-w-full` (default maximum)
- `overflow-hidden`, `text-ellipsis` (for text truncation)

---

## Support

For additional help with the Width System:

- **Documentation**: Check component-specific usage guides
- **Examples**: See test pages in the design system
- **Issues**: Report bugs or request features through the project repository

The Width System is designed to make form layouts more predictable and responsive while maintaining the flexibility developers need for custom implementations.
