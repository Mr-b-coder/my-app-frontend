# DatePicker & DateRangePicker Component Guide

> **Version:** 1.0.82+  
> **Status:** Production Ready  
> **Dependencies:** Calendar Component, Popover Component

## Overview

The DatePicker and DateRangePicker components provide industry-standard date selection for forms. They are built on top of our unified Calendar component and offer modern input field styling matching patterns used in Material Design, Chakra UI, and other leading design systems.

## Table of Contents

1. [Quick Start](#quick-start)
2. [DatePicker Component](#datepicker-component)
3. [DateRangePicker Component](#daterangepicker-component)
4. [Input Field Variants](#input-field-variants)
5. [Label Position Modes](#label-position-modes)
6. [State Management](#state-management)
7. [Calendar Integration](#calendar-integration)
8. [Props Reference](#props-reference)
9. [Examples](#examples)
10. [Accessibility](#accessibility)
11. [Best Practices](#best-practices)

---

## Quick Start

### Installation

The DatePicker and DateRangePicker are included in the Acutrack Design System package:

```bash
npm install @acutrack-bookprint/acutrack-ds
```

### Basic Usage

```tsx
import { DatePicker, DateRangePicker } from '@acutrack-bookprint/acutrack-ds';

// Single Date Selection
function MyForm() {
  const [date, setDate] = useState<Date | null>(null);
  
  return (
    <DatePicker
      label="Select Date"
      value={date}
      onChange={setDate}
    />
  );
}

// Date Range Selection
function MyRangeForm() {
  const [range, setRange] = useState({ start: null, end: null });
  
  return (
    <DateRangePicker
      label="Select Date Range"
      value={range}
      onChange={setRange}
    />
  );
}
```

---

## DatePicker Component

The DatePicker component provides a form input for selecting a single date.

### Features

- Modern input field variants (outline, filled, underline, flushed, ghost)
- Multiple label position modes (top, floating, inside, inline, none)
- Full state management (error, success, disabled, loading)
- Helper text and validation messages
- Clear button and calendar icon
- Today quick-select button
- Full Calendar integration with all design system props

### Basic Example

```tsx
<DatePicker
  label="Birth Date"
  value={birthDate}
  onChange={setBirthDate}
  placeholder="Select your birth date"
  helperText="We use this to verify your age"
  isRequired
/>
```

---

## DateRangePicker Component

The DateRangePicker component provides a form input for selecting a date range.

### Features

- All DatePicker features plus:
- Dual calendar mode (side-by-side months)
- Preset ranges (Today, This Week, Last 7 Days, etc.)
- Adjustable and draggable range ends
- Days selected counter
- Independent navigation for each calendar

### Basic Example

```tsx
<DateRangePicker
  label="Vacation Dates"
  value={vacationRange}
  onChange={setVacationRange}
  hasDualCalendar
  hasPresetRanges
  adjustable
  draggable
/>
```

---

## Input Field Variants

Both components support 5 modern input field variants:

### Outline (Default)

Standard bordered input field.

```tsx
<DatePicker
  inputVariant="outline"
  label="Outline Style"
/>
```

### Filled

Filled background with no visible border.

```tsx
<DatePicker
  inputVariant="filled"
  label="Filled Style"
/>
```

### Underline

Material Design inspired with only a bottom border.

```tsx
<DatePicker
  inputVariant="underline"
  label="Underline Style"
/>
```

### Flushed

Edge-to-edge bottom border without padding.

```tsx
<DatePicker
  inputVariant="flushed"
  label="Flushed Style"
/>
```

### Ghost

Transparent until hover/focus.

```tsx
<DatePicker
  inputVariant="ghost"
  label="Ghost Style"
/>
```

---

## Label Position Modes

Control where and how the label is displayed:

### Top (Default)

Traditional label above the input.

```tsx
<DatePicker
  labelMode="top"
  label="Select Date"
/>
```

### Floating

Label animates up when the input has focus or value.

```tsx
<DatePicker
  labelMode="floating"
  label="Select Date"
/>
```

### Inside

Similar to floating, label starts inside and moves up.

```tsx
<DatePicker
  labelMode="inside"
  label="Select Date"
/>
```

### Inline

Label appears inline with the input (e.g., "Date: Select date").

```tsx
<DatePicker
  labelMode="inline"
  label="Date"
/>
```

### None

No label, placeholder only.

```tsx
<DatePicker
  labelMode="none"
  placeholder="Select date..."
/>
```

---

## State Management

### Error State

Display error styling and message.

```tsx
<DatePicker
  label="Departure Date"
  isError
  errorMessage="Please select a future date"
/>
```

### Success State

Display success styling and message.

```tsx
<DatePicker
  label="Departure Date"
  isSuccess
  successMessage="Date is available"
/>
```

### Disabled State

Prevent interaction.

```tsx
<DatePicker
  label="Locked Date"
  isDisabled
/>
```

### Loading State

Show loading indicator.

```tsx
<DatePicker
  label="Loading..."
  isLoading
/>
```

### Read-Only State

Display value but prevent editing.

```tsx
<DatePicker
  label="Confirmed Date"
  isReadOnly
  value={confirmedDate}
/>
```

---

## Custom Date Formatting

Both DatePicker and DateRangePicker support flexible date formatting through the `dateFormat` prop.

### Format Presets

Industry-standard presets for common date formats:

| Preset | Output Example | Description |
|--------|----------------|-------------|
| `short` | 1/6/26 | Compact numeric format |
| `medium` | Jan 6, 2026 | **Default** - Month abbreviation |
| `long` | January 6, 2026 | Full month name |
| `full` | Monday, January 6, 2026 | Full date with weekday |
| `iso` | 2026-01-06 | ISO 8601 format |
| `us` | 01/06/2026 | US format (MM/DD/YYYY) |
| `eu` | 06/01/2026 | European format (DD/MM/YYYY) |
| `uk` | 06 Jan 2026 | UK format |

```tsx
// Using presets
<DatePicker dateFormat="short" />
<DatePicker dateFormat="long" />
<DatePicker dateFormat="iso" />
<DatePicker dateFormat="eu" />
```

### Custom Format Strings

Use any `date-fns` format pattern for complete control:

```tsx
// Custom format strings (date-fns patterns)
<DatePicker dateFormat="dd/MM/yyyy" />         // 06/01/2026
<DatePicker dateFormat="MMMM do, yyyy" />      // January 6th, 2026
<DatePicker dateFormat="yyyy-MM-dd" />         // 2026-01-06
<DatePicker dateFormat="EEE, MMM d" />         // Mon, Jan 6
<DatePicker dateFormat="d MMMM yyyy" />        // 6 January 2026
```

### Custom Format Functions

For advanced formatting needs, pass a custom function:

```tsx
import { getWeek, getQuarter } from 'date-fns';

// Custom format function
<DatePicker
  dateFormat={(date) => `Week ${getWeek(date)}, ${date.getFullYear()}`}
/>

// Show quarter
<DatePicker
  dateFormat={(date) => `Q${getQuarter(date)} ${date.getFullYear()}`}
/>

// Relative format
<DatePicker
  dateFormat={(date) => {
    const today = new Date();
    const diffDays = Math.floor((today - date) / (1000 * 60 * 60 * 24));
    if (diffDays === 0) return 'Today';
    if (diffDays === 1) return 'Yesterday';
    return date.toLocaleDateString();
  }}
/>
```

### DateRangePicker Formatting

The same `dateFormat` prop works for DateRangePicker:

```tsx
<DateRangePicker
  dateFormat="iso"    // Both start and end dates formatted as ISO
/>

<DateRangePicker
  dateFormat="long"   // "January 1, 2026 - January 15, 2026"
/>
```

### Real-World Examples

```tsx
// Invoice date (formal)
<DatePicker
  label="Invoice Date"
  dateFormat="long"
/>

// API integration (ISO format)
<DatePicker
  label="Start Date"
  dateFormat="iso"
/>

// Localized formats
<DatePicker
  label="Fecha de Nacimiento"  // Spanish
  dateFormat="eu"              // European format
/>

// Financial reporting
<DatePicker
  label="Report Date"
  dateFormat={(date) => `FY${date.getFullYear()}-Q${getQuarter(date)}`}
/>
```

---

## Calendar Integration

Both components pass design system props to the underlying Calendar:

### Calendar Variants

```tsx
<DatePicker
  calendarVariant="solid"   // solid, soft, outline, minimal, glass
/>
```

### Calendar Navigation

```tsx
<DatePicker
  calendarNavigation="modern"  // dropdown, modern, buttons
/>
```

### Week Numbers

```tsx
<DatePicker
  showWeekNumber
/>
```

### Year Range

```tsx
<DatePicker
  fromYear={1950}
  toYear={2030}
/>
```

---

## Props Reference

### DatePicker Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `value` | `Date \| null` | - | Selected date value |
| `onChange` | `(date: Date \| null) => void` | - | Change handler |
| `label` | `string` | - | Label text |
| `placeholder` | `string` | `"Select date"` | Placeholder text |
| `size` | `'xs' \| 'sm' \| 'md' \| 'lg' \| 'xl'` | `'md'` | Input size |
| `inputVariant` | `'outline' \| 'filled' \| 'underline' \| 'flushed' \| 'ghost'` | `'outline'` | Input style |
| `color` | `'primary' \| 'secondary' \| 'success' \| 'warning' \| 'danger' \| 'info' \| 'neutral'` | `'primary'` | Color theme |
| `labelMode` | `'top' \| 'floating' \| 'inside' \| 'inline' \| 'none'` | `'top'` | Label position |
| `radius` | `'none' \| 'sm' \| 'md' \| 'lg' \| 'xl' \| 'full'` | `'md'` | Border radius |
| `isDisabled` | `boolean` | `false` | Disabled state |
| `isLoading` | `boolean` | `false` | Loading state |
| `isError` | `boolean` | `false` | Error state |
| `isSuccess` | `boolean` | `false` | Success state |
| `isRequired` | `boolean` | `false` | Required field |
| `isReadOnly` | `boolean` | `false` | Read-only state |
| `isFullWidth` | `boolean` | `true` | Full width input |
| `hasClearButton` | `boolean` | `true` | Show clear button |
| `hasCalendarIcon` | `boolean` | `true` | Show calendar icon |
| `hasTodayButton` | `boolean` | `true` | Show today button in popover |
| `hasPopoverClearButton` | `boolean` | `true` | Show clear in popover |
| `hasRequiredIndicator` | `boolean` | `true` | Show asterisk for required |
| `helperText` | `string` | - | Helper text below input |
| `errorMessage` | `string` | - | Error message (when isError) |
| `successMessage` | `string` | - | Success message (when isSuccess) |
| `minDate` | `DateInput` | - | Minimum selectable date (Date object or string) |
| `maxDate` | `DateInput` | - | Maximum selectable date (Date object or string) |
| `calendarVariant` | `CalendarVariant` | `'solid'` | Calendar visual style |
| `calendarSize` | `CalendarSize` | Auto | Calendar size |
| `calendarDensity` | `CalendarDensity` | `'comfortable'` | Calendar density |
| `calendarRadius` | `CalendarRadius` | `'md'` | Calendar border radius |
| `calendarNavigation` | `CalendarNavigation` | `'dropdown'` | Navigation style |
| `showWeekNumber` | `boolean` | `false` | Show week numbers |
| `weekStartsOn` | `0-6` | `0` | First day of week |
| `fromYear` | `number` | Current - 100 | Start year |
| `toYear` | `number` | Current + 10 | End year |
| `closeOnSelect` | `boolean` | `true` | Close on date select |
| `dateFormat` | `DateFormat` | `'medium'` | Date display format (preset, string, or function) |
| `position` | `PopoverPosition` | `'bottom-start'` | Popover position |
| `className` | `string` | - | Custom CSS class |
| `style` | `CSSProperties` | - | Custom inline styles |

**DateFormat Type:**
```typescript
type DateFormatPreset = 'short' | 'medium' | 'long' | 'full' | 'iso' | 'us' | 'eu' | 'uk';
type DateFormat = DateFormatPreset | string | ((date: Date) => string);
```

**DateInput Type (Flexible Date Input):**
```typescript
type DateInput = Date | string;

// Supported string formats:
// ISO:     "2024-01-15"           (recommended)
// US:      "01/15/2024"           (MM/DD/YYYY)
// UK:      "15 Jan 2024"          (DD Mon YYYY)
// Natural: "January 15, 2024"     (Full month name)

// Usage examples:
<DatePicker minDate="2024-01-15" />           // ISO string
<DatePicker minDate="01/15/2024" />           // US format
<DatePicker minDate="15 Jan 2024" />          // UK format
<DatePicker minDate="January 15, 2024" />     // Natural
<DatePicker minDate={new Date(2024, 0, 15)} /> // Date object
```

**PopoverPosition Type:**
```typescript
type PopoverPosition =
  | 'bottom' | 'bottom-start' | 'bottom-end'
  | 'top' | 'top-start' | 'top-end'
  | 'left' | 'left-start' | 'left-end'
  | 'right' | 'right-start' | 'right-end';

// Common positions for DatePicker:
<DatePicker position="bottom-start" /> // Default - below, aligned left
<DatePicker position="bottom-end" />   // Below, aligned right
<DatePicker position="top-start" />    // Above, aligned left
<DatePicker position="top-end" />      // Above, aligned right
```

### DateRangePicker Props

Includes all DatePicker props plus:

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `value` | `{ start: Date \| null; end: Date \| null }` | - | Selected range |
| `onChange` | `(range: DateRange) => void` | - | Change handler |
| `hasDualCalendar` | `boolean` | `true` | Show two calendars |
| `hasPresetRanges` | `boolean` | `true` | Show preset options |
| `hasPresetPanel` | `boolean` | `true` | Show preset panel |
| `adjustable` | `boolean` | `true` | Allow click-to-adjust range |
| `draggable` | `boolean` | `true` | Allow drag-to-adjust range |
| `independentNavigation` | `boolean` | `true` | Independent month navigation |
| `onPresetSelect` | `(range: DateRange) => void` | - | Preset selection callback |

---

## Examples

### Form Integration

```tsx
import { DatePicker, DateRangePicker, Button, Form } from '@acutrack-bookprint/acutrack-ds';

function BookingForm() {
  const [checkIn, setCheckIn] = useState<Date | null>(null);
  const [checkOut, setCheckOut] = useState<Date | null>(null);
  
  return (
    <Form onSubmit={handleSubmit}>
      <DatePicker
        label="Check-in Date"
        value={checkIn}
        onChange={setCheckIn}
        minDate={new Date()}
        isRequired
        inputVariant="filled"
        color="primary"
      />
      
      <DatePicker
        label="Check-out Date"
        value={checkOut}
        onChange={setCheckOut}
        minDate={checkIn || new Date()}
        isRequired
        inputVariant="filled"
        color="primary"
        isDisabled={!checkIn}
      />
      
      <Button type="submit">Book Now</Button>
    </Form>
  );
}
```

### Report Date Range

```tsx
function ReportFilters() {
  const [dateRange, setDateRange] = useState({
    start: null,
    end: null
  });
  
  return (
    <DateRangePicker
      label="Report Period"
      value={dateRange}
      onChange={setDateRange}
      inputVariant="outline"
      color="info"
      calendarVariant="soft"
      calendarNavigation="modern"
      hasDualCalendar
      hasPresetRanges
      helperText="Select the date range for your report"
    />
  );
}
```

### Floating Label Style

```tsx
<DatePicker
  label="Date of Birth"
  labelMode="floating"
  inputVariant="outline"
  value={dob}
  onChange={setDob}
  maxDate={new Date()}
  fromYear={1900}
  toYear={new Date().getFullYear()}
/>
```

### Error Validation

```tsx
function ValidatedDatePicker() {
  const [date, setDate] = useState<Date | null>(null);
  const [error, setError] = useState<string | null>(null);
  
  const handleChange = (newDate: Date | null) => {
    setDate(newDate);
    if (newDate && newDate < new Date()) {
      setError("Date must be in the future");
    } else {
      setError(null);
    }
  };
  
  return (
    <DatePicker
      label="Appointment Date"
      value={date}
      onChange={handleChange}
      isError={!!error}
      errorMessage={error || undefined}
      minDate={new Date()}
    />
  );
}
```

---

## Date Constraints (Min/Max Dates)

The `minDate` and `maxDate` props provide powerful date range validation. Dates outside this range are automatically:
- **Greyed out** visually
- **Unselectable** via click
- **Navigation boundaries** respected (calendar won't navigate beyond the range)

### Flexible Date Input Formats

Both props accept Date objects OR strings in various formats:

```tsx
// ISO format (recommended - always unambiguous)
<DatePicker minDate="2024-01-15" maxDate="2025-12-31" />

// US format (MM/DD/YYYY)
<DatePicker minDate="01/15/2024" maxDate="12/31/2025" />

// UK format (DD Mon YYYY)
<DatePicker minDate="15 Jan 2024" maxDate="31 Dec 2025" />

// Natural format
<DatePicker minDate="January 15, 2024" />

// Date objects (still fully supported)
<DatePicker minDate={new Date(2024, 0, 15)} maxDate={new Date()} />

// Mix and match!
<DatePicker minDate="2024-01-01" maxDate={new Date()} />
```

### Real-World Constraint Examples

#### Age Verification (18+ Required)
```tsx
const today = new Date();
const eighteenYearsAgo = new Date(
  today.getFullYear() - 18,
  today.getMonth(),
  today.getDate()
);

<DatePicker
  label="Date of Birth"
  minDate={new Date(today.getFullYear() - 100, 0, 1)}  // 100 years ago
  maxDate={eighteenYearsAgo}                            // Must be 18+
  fromYear={today.getFullYear() - 100}
  toYear={today.getFullYear() - 18}
  helperText="You must be at least 18 years old"
/>
```

#### Future Appointment Booking
```tsx
const tomorrow = new Date();
tomorrow.setDate(tomorrow.getDate() + 1);

const threeMonthsFromNow = new Date();
threeMonthsFromNow.setMonth(threeMonthsFromNow.getMonth() + 3);

<DatePicker
  label="Appointment Date"
  minDate={tomorrow}           // Can't book today
  maxDate={threeMonthsFromNow} // Within 3 months only
  helperText="Select a date within the next 3 months"
/>
```

#### Event Window (Specific Date Range)
```tsx
<DatePicker
  label="Conference Day"
  minDate="2025-12-01"  // Conference starts Dec 1
  maxDate="2025-12-31"  // Conference ends Dec 31
  helperText="Conference runs December 1-31, 2025"
/>
```

### Using parseDateInput Utility

For programmatic date parsing, use the exported utility:

```tsx
import { parseDateInput } from '@acutrack-bookprint/acutrack-ds';

// Parse any supported format to Date object
const date1 = parseDateInput("2024-01-15");        // ISO
const date2 = parseDateInput("01/15/2024");        // US
const date3 = parseDateInput("15 Jan 2024");       // UK
const date4 = parseDateInput("January 15, 2024");  // Natural
const date5 = parseDateInput(new Date());          // Pass-through

// Auto-detection for ambiguous formats
const euroDate = parseDateInput("15/01/2024", 'eu'); // Force EU format
```

---

## Accessibility

Both components follow WCAG 2.1 guidelines:

- **Keyboard Navigation**: Full keyboard support for date selection
- **ARIA Labels**: Proper aria-label, aria-invalid, aria-required attributes
- **Focus Management**: Focus is properly managed when opening/closing popover
- **Screen Reader Support**: Dates are announced with full context
- **Color Contrast**: All states meet minimum contrast requirements

### Keyboard Shortcuts

| Key | Action |
|-----|--------|
| `Enter` / `Space` | Open calendar popover |
| `Escape` | Close popover |
| `Tab` | Move focus to next element |
| `Arrow Keys` | Navigate calendar days |

---

## Best Practices

### 1. Always Provide a Label

```tsx
// ✅ Good
<DatePicker label="Departure Date" />

// ❌ Avoid
<DatePicker placeholder="Select date" />
```

### 2. Use Appropriate Constraints

```tsx
// ✅ Good - Future dates only for bookings
<DatePicker
  label="Booking Date"
  minDate={new Date()}
/>

// ✅ Good - Limited year range for birth dates
<DatePicker
  label="Birth Date"
  fromYear={1920}
  toYear={new Date().getFullYear()}
/>
```

### 3. Provide Helpful Error Messages

```tsx
// ✅ Good - Specific error message
<DatePicker
  isError
  errorMessage="Please select a date within the next 30 days"
/>

// ❌ Avoid - Generic message
<DatePicker
  isError
  errorMessage="Invalid date"
/>
```

### 4. Use Dual Calendar for Ranges

```tsx
// ✅ Good - Easier to select cross-month ranges
<DateRangePicker
  hasDualCalendar
  independentNavigation
/>
```

### 5. Match Variant to Context

```tsx
// ✅ Good - Filled variant for card backgrounds
<Card>
  <DatePicker inputVariant="filled" />
</Card>

// ✅ Good - Underline variant for minimal forms
<DatePicker inputVariant="underline" />
```

---

## Migration from Previous Versions

If you're upgrading from an older version:

### Breaking Changes

1. **Prop Renames**:
   - `variant` → `inputVariant` (for input styling)
   - `error` → `errorMessage`
   - `description` → `helperText`

2. **New Required Format** for DateRangePicker:
   ```tsx
   // Old
   value={{ from: date1, to: date2 }}
   
   // New
   value={{ start: date1, end: date2 }}
   ```

### Backward Compatibility

Legacy props are still supported but deprecated:
- `variant` - Use `inputVariant` instead
- `error` - Use `errorMessage` instead
- `description` - Use `helperText` instead

---

## Related Components

- [Calendar Component](./CALENDAR_COMPONENT_GUIDE.md) - Core calendar used by these components
- [Popover Component](./POPOVER.md) - Popover container for calendar dropdown
- [Button Component](./BUTTON.md) - Used for Today/Clear buttons
- [Form Components](./FORMS.md) - Integration with form validation

---

## Changelog

### v1.0.82
- Added industry-standard input variants (outline, filled, underline, flushed, ghost)
- Added label position modes (top, floating, inside, inline, none)
- Added state management (error, success, disabled, loading)
- Added helper text, error message, and success message support
- Full integration with redesigned Calendar component
- Improved accessibility with ARIA attributes
- Added size, color, and radius customization

