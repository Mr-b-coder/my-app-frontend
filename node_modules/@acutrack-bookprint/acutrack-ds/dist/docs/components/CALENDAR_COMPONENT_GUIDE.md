# Calendar Component Guide

A comprehensive, feature-rich Calendar component built on `react-day-picker` v9 with full design system integration.

## Table of Contents

1. [Overview](#overview)
2. [Installation](#installation)
3. [Basic Usage](#basic-usage)
4. [Selection Modes](#selection-modes)
5. [Visual Variants](#visual-variants)
6. [Color Palette](#color-palette)
7. [Size Options](#size-options)
8. [Navigation Styles](#navigation-styles)
9. [Dual Calendar Mode](#dual-calendar-mode)
10. [Range Selection Features](#range-selection-features)
11. [Props Reference](#props-reference)
12. [Examples](#examples)
13. [Migration Guide](#migration-guide)
14. [Accessibility](#accessibility)
15. [Best Practices](#best-practices)

---

## Overview

The Calendar component provides a flexible, accessible date picker with:

- **3 Selection Modes**: Single, Range, Multiple
- **5 Visual Variants**: Solid, Soft, Outline, Minimal, Glass
- **7 Semantic Colors**: Primary, Secondary, Success, Warning, Danger, Info, Neutral
- **5 Size Options**: XS, SM, MD, LG, XL
- **4 Navigation Styles**: Modern, Dropdown, Buttons, Default
- **Dual Calendar Mode**: Side-by-side months with independent navigation
- **Industry-Standard UX**: Hover preview, draggable range ends, smart date ordering

---

## Installation

The Calendar component is included in the Acutrack Design System. It requires the following peer dependencies:

```bash
npm install @acutrack-bookprint/acutrack-ds
```

Dependencies automatically included:
- `react-day-picker` v9.13.0
- `date-fns` v3.6.0

---

## Basic Usage

```tsx
import { Calendar } from '@acutrack-bookprint/acutrack-ds';
import { useState } from 'react';

function MyComponent() {
  const [selectedDate, setSelectedDate] = useState<Date | undefined>();

  return (
    <Calendar
      mode="single"
      value={selectedDate}
      onDateSelect={setSelectedDate}
    />
  );
}
```

---

## Selection Modes

### Single Mode

Select a single date:

```tsx
<Calendar
  mode="single"
  value={selectedDate}
  onDateSelect={setSelectedDate}
  variant="solid"
  color="primary"
/>
```

### Range Mode

Select a date range with start and end dates:

```tsx
import { DateRange } from 'react-day-picker';

const [range, setRange] = useState<DateRange | undefined>();

<Calendar
  mode="range"
  rangeValue={range}
  onRangeSelect={setRange}
  adjustable={true}  // Allow clicking to adjust range ends
  draggable={true}   // Allow dragging range ends
/>
```

**Range Selection Behavior (Industry Standard):**

| State | User Action | Result |
|-------|-------------|--------|
| **State 0** (No selection) | Click any date | Sets as Start Date |
| **State 1** (Start selected) | Hover over dates | Shows range preview |
| **State 1** (Start selected) | Click date after start | Sets as End Date (complete range) |
| **State 1** (Start selected) | Click date before start | Swaps dates (smart ordering) |
| **State 1** (Start selected) | Click same date | Clears selection (undo) |
| **State 2** (Complete range) | Click any date | Resets and sets new Start Date |

### Multiple Mode

Select multiple individual dates:

```tsx
const [dates, setDates] = useState<Date[]>([]);

<Calendar
  mode="multiple"
  multiValue={dates}
  onMultiSelect={setDates}
/>
```

---

## Visual Variants

### Solid (Default)

Filled background with white text for selected dates:

```tsx
<Calendar variant="solid" color="primary" />
```

### Soft

Light tinted background with accent-colored text:

```tsx
<Calendar variant="soft" color="success" />
```

### Outline

Transparent background with accent-colored border:

```tsx
<Calendar variant="outline" color="warning" />
```

### Minimal

Subtle styling with underline indicator for selected dates:

```tsx
<Calendar variant="minimal" color="info" />
```

### Glass

Glassmorphism effect with transparency and blur:

```tsx
<Calendar variant="glass" color="primary" />
```

**Glass Variant Range Styling:**
- Start/End dates: Gradient background with blur
- Middle dates: Very light tint with dashed borders
- Readable text with proper contrast

---

## Color Palette

```tsx
// Primary - Brand teal/cyan
<Calendar color="primary" />

// Secondary - Brand navy slate (dark mode optimized)
<Calendar color="secondary" />

// Success - Green tones
<Calendar color="success" />

// Warning - Orange/amber tones
<Calendar color="warning" />

// Danger - Red tones
<Calendar color="danger" />

// Info - Blue tones
<Calendar color="info" />

// Neutral - Gray tones
<Calendar color="neutral" />
```

---

## Size Options

```tsx
// Extra Small
<Calendar size="xs" />

// Small
<Calendar size="sm" />

// Medium (default)
<Calendar size="md" />

// Large
<Calendar size="lg" />

// Extra Large
<Calendar size="xl" />
```

**Size Specifications:**

| Size | Day Cell | Font Size | Nav Button | Dropdown |
|------|----------|-----------|------------|----------|
| xs | 24px | 10px | 20px | 10px |
| sm | 28px | 11px | 24px | 11px |
| md | 36px | 13px | 32px | 13px |
| lg | 44px | 15px | 40px | 15px |
| xl | 52px | 17px | 48px | 17px |

---

## Navigation Styles

### Modern Navigation

Interactive month/year grid popovers:

```tsx
<Calendar navigation="modern" />
```

- Click month name → Month grid popover
- Click year → Year grid popover
- Smooth transitions and animations

### Dropdown Navigation

Native select dropdowns:

```tsx
<Calendar navigation="dropdown" />
```

- Standard HTML select elements
- Fast and accessible
- Works on all devices

### Buttons Navigation

Text labels with navigation arrows only:

```tsx
<Calendar navigation="buttons" />
```

- Clean, minimal look
- Month/Year as plain text
- Arrow buttons for navigation

### Default Navigation

Standard navigation with dropdowns:

```tsx
<Calendar navigation="default" />
```

---

## Dual Calendar Mode

Display two months side-by-side for easier range selection:

```tsx
<Calendar
  mode="range"
  numberOfMonths={2}
  independentNavigation={true}
  rangeValue={selectedRange}
  onRangeSelect={setSelectedRange}
/>
```

**Independent Navigation Features:**

- Each calendar has its own month/year controls
- Individual navigation arrows for each calendar
- Respects the chosen navigation style
- Cross-calendar range selection works seamlessly

```tsx
// Dual calendar with modern navigation
<Calendar
  mode="range"
  numberOfMonths={2}
  independentNavigation={true}
  navigation="modern"
  rangeValue={range}
  onRangeSelect={setRange}
  adjustable={true}
  draggable={true}
/>
```

---

## Date Constraints (Min/Max Dates)

The `fromDate` and `toDate` props provide date range validation:

- **Dates before `fromDate`**: Greyed out and unselectable
- **Dates after `toDate`**: Greyed out and unselectable
- **Navigation**: Limited to the valid date range

### Basic Usage

```tsx
// Future dates only (booking system)
<Calendar
  mode="single"
  fromDate={new Date()}  // Can't select past dates
  toDate={addMonths(new Date(), 6)}  // Max 6 months ahead
/>

// Birth date picker (18+ required)
const eighteenYearsAgo = new Date();
eighteenYearsAgo.setFullYear(eighteenYearsAgo.getFullYear() - 18);

<Calendar
  mode="single"
  fromDate={new Date(1920, 0, 1)}  // Earliest birth date
  toDate={eighteenYearsAgo}        // Must be 18+
  fromYear={1920}
  toYear={new Date().getFullYear() - 18}
/>
```

### Combined with Disabled Dates

```tsx
// Block specific dates (holidays) within a valid range
const blockedDates = [
  new Date(2024, 11, 25),  // Christmas
  new Date(2024, 11, 26),  // Boxing Day
];

<Calendar
  mode="single"
  fromDate={new Date()}
  toDate={new Date(2024, 11, 31)}
  disabledDates={blockedDates}
/>
```

---

## Range Selection Features

### Adjustable Range Ends

Allow users to click to extend or shrink the range:

```tsx
<Calendar
  mode="range"
  adjustable={true}
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

### Draggable Range Handles

Allow users to drag start/end dates to adjust the range:

```tsx
<Calendar
  mode="range"
  draggable={true}
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

**Drag Behavior:**
- Cursor changes to "grab" when hovering over start/end dates
- Cursor changes to "grabbing" while dragging
- Visual handle indicator appears on draggable dates
- Range updates in real-time as you drag

### Hover Preview

When in State 1 (Start Date selected), hovering over potential end dates shows a preview of the range:

```tsx
// Hover preview is automatic in range mode
<Calendar
  mode="range"
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

### Cross-Calendar Selection

In dual calendar mode, you can select a start date in one calendar and an end date in another:

```tsx
// Select Dec 28 on left calendar, Jan 15 on right calendar
<Calendar
  mode="range"
  numberOfMonths={2}
  independentNavigation={true}
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

---

## Props Reference

### Base Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `mode` | `'single' \| 'range' \| 'multiple'` | `'single'` | Selection mode |
| `variant` | `'solid' \| 'soft' \| 'outline' \| 'minimal' \| 'glass'` | `'solid'` | Visual style |
| `color` | `'primary' \| 'secondary' \| 'success' \| 'warning' \| 'danger' \| 'info' \| 'neutral'` | `'primary'` | Color theme |
| `size` | `'xs' \| 'sm' \| 'md' \| 'lg' \| 'xl'` | `'md'` | Calendar size |
| `density` | `'compact' \| 'comfortable' \| 'spacious' \| 'relaxed'` | `'comfortable'` | Spacing density |
| `radius` | `'none' \| 'sm' \| 'md' \| 'lg' \| 'xl' \| 'full'` | `'lg'` | Border radius |
| `navigation` | `'default' \| 'modern' \| 'dropdown' \| 'buttons'` | `'default'` | Navigation style |

### Single Mode Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `value` | `Date \| undefined` | - | Selected date |
| `onDateSelect` | `(date: Date \| undefined) => void` | - | Selection callback |

### Range Mode Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `rangeValue` | `DateRange \| undefined` | - | Selected range |
| `onRangeSelect` | `(range: DateRange \| undefined) => void` | - | Range selection callback |
| `adjustable` | `boolean` | `false` | Allow clicking to adjust range ends |
| `draggable` | `boolean` | `false` | Allow dragging range ends |
| `min` | `number` | - | Minimum days in range |
| `max` | `number` | - | Maximum days in range |

### Multiple Mode Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `multiValue` | `Date[]` | `[]` | Selected dates |
| `onMultiSelect` | `(dates: Date[]) => void` | - | Multiple selection callback |

### Display Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `numberOfMonths` | `number` | `1` | Number of months to display |
| `independentNavigation` | `boolean` | `false` | Independent controls for each calendar |
| `displayMonth` | `Date` | Current month | Initially displayed month |
| `onDisplayMonthChange` | `(month: Date) => void` | - | Month change callback |
| `showOutsideDays` | `boolean` | `true` | Show days outside current month |
| `showWeekNumber` | `boolean` | `false` | Show week numbers |
| `highlightToday` | `boolean` | `true` | Highlight today's date |
| `weekStartsOn` | `0-6` | `0` | First day of week (0 = Sunday) |

### Style Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `elevated` | `boolean` | `false` | Add shadow elevation |
| `bordered` | `boolean` | `false` | Add border |
| `animated` | `boolean` | `true` | Enable smooth transitions |
| `className` | `string` | - | Additional CSS classes |

### Constraint Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `fromYear` | `number` | Current year - 100 | Earliest selectable year (navigation) |
| `toYear` | `number` | Current year + 10 | Latest selectable year (navigation) |
| `fromDate` | `Date` | - | Minimum selectable date (dates before are disabled) |
| `toDate` | `Date` | - | Maximum selectable date (dates after are disabled) |
| `disabledDates` | `Date[]` | - | Specific dates to disable |

---

## Examples

### Date Picker Form Field

```tsx
import { Calendar, Card, Button } from '@acutrack-bookprint/acutrack-ds';
import { useState } from 'react';

function DatePickerField() {
  const [date, setDate] = useState<Date | undefined>();

  return (
    <Card bordered>
      <Card.Header>
        <Card.Title>Select Date</Card.Title>
      </Card.Header>
      <Card.Body>
        <Calendar
          mode="single"
          value={date}
          onDateSelect={setDate}
          variant="soft"
          color="primary"
          bordered
        />
      </Card.Body>
      <Card.Footer>
        <Button onClick={() => console.log(date)}>
          Confirm
        </Button>
      </Card.Footer>
    </Card>
  );
}
```

### Date Range Picker for Booking

```tsx
import { Calendar } from '@acutrack-bookprint/acutrack-ds';
import { DateRange } from 'react-day-picker';
import { useState } from 'react';
import { addDays, isBefore } from 'date-fns';

function BookingDatePicker() {
  const [range, setRange] = useState<DateRange | undefined>();
  const today = new Date();

  return (
    <Calendar
      mode="range"
      rangeValue={range}
      onRangeSelect={setRange}
      numberOfMonths={2}
      independentNavigation={true}
      navigation="modern"
      variant="solid"
      color="success"
      adjustable={true}
      draggable={true}
      fromDate={today}  // Can't select past dates
      toDate={addDays(today, 365)}  // Max 1 year ahead
      min={1}  // Minimum 1 day
      max={30}  // Maximum 30 days
      elevated
    />
  );
}
```

### Event Calendar with Multiple Selection

```tsx
import { Calendar } from '@acutrack-bookprint/acutrack-ds';
import { useState } from 'react';

function EventCalendar() {
  const [eventDates, setEventDates] = useState<Date[]>([]);

  return (
    <Calendar
      mode="multiple"
      multiValue={eventDates}
      onMultiSelect={setEventDates}
      variant="outline"
      color="info"
      size="lg"
      navigation="modern"
      bordered
      elevated
    />
  );
}
```

### Themed Calendar Showcase

```tsx
// All variants with same color
const variants = ['solid', 'soft', 'outline', 'minimal', 'glass'];

{variants.map(variant => (
  <Calendar
    key={variant}
    variant={variant}
    color="primary"
    size="sm"
    bordered
  />
))}

// All colors with same variant
const colors = ['primary', 'secondary', 'success', 'warning', 'danger', 'info', 'neutral'];

{colors.map(color => (
  <Calendar
    key={color}
    variant="solid"
    color={color}
    size="sm"
    bordered
  />
))}
```

---

## Migration Guide

### From CalendarGridView

The `CalendarGridView` component has been removed. Use the new `Calendar` component with built-in navigation:

**Before:**
```tsx
import { Calendar, CalendarGridView } from '@acutrack-bookprint/acutrack-ds';

// Separate components for different views
<CalendarGridView
  view="months"
  displayDate={displayDate}
  onMonthSelect={handleMonthSelect}
/>
```

**After:**
```tsx
import { Calendar } from '@acutrack-bookprint/acutrack-ds';

// All-in-one component with built-in navigation
<Calendar
  mode="single"
  value={selectedDate}
  onDateSelect={setSelectedDate}
  navigation="modern"  // Grid popovers for month/year
/>
```

### Prop Changes

| Old Prop | New Prop | Notes |
|----------|----------|-------|
| `selectedValue` | `value` | Deprecated, still works |
| `displayDate` | `displayMonth` | Deprecated, still works |
| `onDisplayDateChange` | `onDisplayMonthChange` | Deprecated, still works |
| `hasShadow` | `elevated` | New prop |
| `isBordered` | `bordered` | New prop |

---

## Accessibility

The Calendar component is built with accessibility in mind:

- **Keyboard Navigation**: Full keyboard support for date selection
- **ARIA Labels**: Proper labeling for screen readers
- **Focus Management**: Clear focus indicators
- **Contrast Ratios**: WCAG AA compliant colors
- **Screen Reader Announcements**: Date selection is announced

**Keyboard Shortcuts:**

| Key | Action |
|-----|--------|
| `Tab` | Move focus to next/previous element |
| `Arrow Keys` | Navigate between dates |
| `Enter/Space` | Select focused date |
| `Page Up/Down` | Navigate months |
| `Home/End` | Go to first/last day of week |

---

## Best Practices

### Do's

✅ Use `mode="range"` with `adjustable` and `draggable` for the best range selection UX

✅ Use `numberOfMonths={2}` with `independentNavigation` for date range pickers

✅ Use `navigation="modern"` for the most intuitive month/year selection

✅ Use semantic colors (`success` for availability, `danger` for blocking)

✅ Set `fromDate` and `toDate` constraints for booking systems

### Don'ts

❌ Don't use `mode="range"` without proper instructions for users

❌ Don't use extremely small sizes (`xs`) for touch interfaces

❌ Don't disable too many dates without explanation

❌ Don't mix multiple calendars with different selection modes on the same page

---

## Troubleshooting

### Range Middle Dates Not Visible

Ensure you're using the correct CSS import:

```tsx
import '@acutrack-bookprint/acutrack-ds/dist/style.css';
```

### Drag Not Working

Make sure both `adjustable` and `draggable` are set:

```tsx
<Calendar
  mode="range"
  adjustable={true}
  draggable={true}
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

### Cross-Calendar Selection Not Working

Enable `independentNavigation` for dual calendar mode:

```tsx
<Calendar
  mode="range"
  numberOfMonths={2}
  independentNavigation={true}
  rangeValue={range}
  onRangeSelect={setRange}
/>
```

---

## Dependencies

- `react-day-picker` v9.13.0 - Core calendar functionality
- `date-fns` v3.6.0 - Date manipulation utilities

---

**Version**: 1.0.82  
**Last Updated**: January 3, 2026

