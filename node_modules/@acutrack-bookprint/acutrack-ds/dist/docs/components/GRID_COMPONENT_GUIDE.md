# Grid Component Guide

## Overview

The Grid component is a flexible, responsive layout system that provides CSS Grid capabilities with Tailwind CSS integration. It supports both traditional column-based layouts and modern auto-fit grids for dynamic, fluid layouts.

### Key Features
- ✅ **Responsive Columns**: Configure columns for different breakpoints (xs, sm, md, lg, xl, 2xl)
- ✅ **Auto-Fit Grids**: Dynamic columns that fit available space with minimum width constraints
- ✅ **Flexible Gap System**: Support for 0-32 spacing values
- ✅ **Backward Compatibility**: Supports deprecated props with helpful migration warnings
- ✅ **Compound Components**: `Grid` and `Grid.Item` for clean API
- ✅ **Type Safe**: Full TypeScript support with proper type narrowing

## Installation

```tsx
import { Grid } from '@acutrack-bookprint/acutrack-ds';
```

## Basic Usage

### Simple Grid
```tsx
<Grid cols={3} gap={6}>
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
</Grid>
```

### Responsive Grid
```tsx
<Grid cols={{ xs: 1, sm: 2, lg: 4 }} gap={6}>
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
  <div>Item 4</div>
</Grid>
```

### Auto-Fit Grid
```tsx
<Grid autoFit="auto-fit" minColumnWidth="300px" gap={6}>
  <div>Responsive Item 1</div>
  <div>Responsive Item 2</div>
  <div>Responsive Item 3</div>
</Grid>
```

### With Grid Items
```tsx
<Grid cols={{ xs: 1, md: 2, lg: 3 }} gap={6}>
  <Grid.Item span={1}>Full Width</Grid.Item>
  <Grid.Item span={1}>Full Width</Grid.Item>
  <Grid.Item sm={2}>Spans 2 on sm+</Grid.Item>
</Grid>
```

## API Reference

### Grid Component Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `as` | `React.ElementType` | `'div'` | HTML element to render |
| `children` | `React.ReactNode` | Required | Grid content |
| `cols` | `number \| ResponsiveColumns` | `1` | Number of columns or responsive config |
| `gap` | `GridGap` | `6` | Gap size between grid items |
| `autoFit` | `string` | - | Enable auto-fit grid (use with minColumnWidth) |
| `minColumnWidth` | `string` | - | Minimum column width for auto-fit |
| `className` | `string` | - | Additional CSS classes |

#### Deprecated Props (Backward Compatibility)

| Prop | Type | Deprecated | Migration |
|------|------|-----------|-----------|
| `hasBackground` | `boolean` | ✅ | Use `className="bg-white dark:bg-gray-900"` |
| `isBordered` | `boolean` | ✅ | Use `className="border border-gray-200 dark:border-gray-700"` |
| `isRounded` | `boolean` | ✅ | Use `className="rounded-lg"` |
| `hasShadow` | `boolean` | ✅ | Use `className="shadow-md"` |
| `hasPadding` | `boolean` | ✅ | Use `className="p-6"` |

### GridItem Component Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `as` | `React.ElementType` | `'div'` | HTML element to render |
| `children` | `React.ReactNode` | Required | Item content |
| `span` | `number` | `1` | Number of columns to span |
| `sm` | `number` | - | Span on small screens |
| `md` | `number` | - | Span on medium screens |
| `lg` | `number` | - | Span on large screens |
| `xl` | `number` | - | Span on extra large screens |
| `2xl` | `number` | - | Span on 2xl screens |
| `className` | `string` | - | Additional CSS classes |

### Types

```typescript
// Gap values (0-12 plus standard spacing)
export type GridGap = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 16 | 20 | 24 | 32;

// Responsive column configuration
export interface ResponsiveColumns {
  xs?: number;
  sm?: number;
  md?: number;
  lg?: number;
  xl?: number;
  '2xl'?: number;
}
```

## Common Patterns

### Card Grid
```tsx
<Grid cols={{ xs: 1, md: 2, lg: 3 }} gap={6}>
  {products.map(product => (
    <Grid.Item key={product.id}>
      <Card>
        <Card.Image src={product.image} />
        <Card.Body>
          <Card.Title>{product.name}</Card.Title>
          <Card.Text>{product.description}</Card.Text>
        </Card.Body>
      </Card>
    </Grid.Item>
  ))}
</Grid>
```

### Auto-Fit Product Grid
```tsx
<Grid autoFit="auto-fit" minColumnWidth="250px" gap={6}>
  {products.map(product => (
    <Grid.Item key={product.id}>
      <ProductCard product={product} />
    </Grid.Item>
  ))}
</Grid>
```

### Dashboard Layout
```tsx
<Grid cols={{ xs: 1, md: 2, lg: 4 }} gap={6}>
  <Grid.Item>
    <Card>
      <h3>Total Users</h3>
      <p className="text-4xl font-bold">1,234</p>
    </Card>
  </Grid.Item>
  <Grid.Item>
    <Card>
      <h3>Revenue</h3>
      <p className="text-4xl font-bold">$12,345</p>
    </Card>
  </Grid.Item>
</Grid>
```

### Form Layout
```tsx
<Grid cols={{ xs: 1, md: 2 }} gap={6}>
  <Grid.Item>
    <Input label="First Name" />
  </Grid.Item>
  <Grid.Item>
    <Input label="Last Name" />
  </Grid.Item>
  <Grid.Item span={2}>
    <Input label="Email" type="email" />
  </Grid.Item>
</Grid>
```

### Mixed Column Spans
```tsx
<Grid cols={4} gap={6}>
  <Grid.Item>1/4</Grid.Item>
  <Grid.Item sm={2}>1/2 on sm+</Grid.Item>
  <Grid.Item lg={1}>1/4</Grid.Item>
</Grid>
```

## Best Practices

### Modern Approach (Recommended)
```tsx
// ✅ Use className for styling
<Grid 
  cols={{ xs: 1, md: 2, lg: 3 }} 
  gap={6}
  className="bg-white rounded-lg shadow-md p-6"
>
  {items}
</Grid>
```

### Deprecated Props (Still Works)
```tsx
// ⚠️ Works but shows deprecation warnings
<Grid 
  cols={3}
  hasBackground
  isBordered
  hasShadow
>
  {items}
</Grid>
```

### Performance Optimization
```tsx
// ✅ Memoize grid classes for performance
const MyComponent = () => {
  const gridClasses = useMemo(() => 
    'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6',
    []
  );
  
  return <div className={gridClasses}>{items}</div>;
};
```

## Accessibility

### Keyboard Navigation
- ✅ Grid items are keyboard accessible by default
- ✅ Focus management follows document order
- ✅ Screen readers announce grid structure

### Screen Reader Support
- ✅ Semantic HTML structure
- ✅ Proper ARIA labels when needed
- ✅ Logical content ordering

### WCAG AA Compliance
- ✅ Color contrast: Meets minimum contrast ratios
- ✅ Keyboard accessible: All functionality available via keyboard
- ✅ Focus indicators: Clear focus states

## Styling

### Custom Classes
```tsx
<Grid 
  cols={3} 
  gap={6}
  className="bg-gray-50 rounded-lg p-8 border-2 border-blue-500"
>
  {items}
</Grid>
```

### Dark Mode
```tsx
<Grid 
  cols={3} 
  gap={6}
  className="bg-white dark:bg-gray-900"
>
  {items}
</Grid>
```

### Conditional Styling
```tsx
<Grid 
  cols={3} 
  gap={6}
  className={cn(
    "bg-white",
    isActive && "ring-2 ring-blue-500",
    hasError && "border-red-500"
  )}
>
  {items}
</Grid>
```

## Troubleshooting

### Issue: Type errors with dynamic numbers
**Error**: `Type 'number' is not assignable to type '1 | 2 | 3...'`

**Solution**: Use the flexible `ResponsiveColumns` interface that accepts any `number`:
```tsx
const dynamicCols = calculateColumns(); // returns number

<Grid cols={dynamicCols} gap={6}>
  {items}
</Grid>
```

### Issue: Grid not responsive
**Problem**: Columns don't change on different screen sizes

**Solution**: Ensure you're using the responsive columns syntax:
```tsx
// ✅ Correct
<Grid cols={{ xs: 1, sm: 2, md: 3, lg: 4 }} gap={6}>

// ❌ Wrong - will use same columns on all screens
<Grid cols={3} gap={6}>
```

### Issue: Auto-fit not working
**Problem**: Auto-fit grid shows single column

**Solution**: Provide both `autoFit` and `minColumnWidth`:
```tsx
// ✅ Correct
<Grid autoFit="auto-fit" minColumnWidth="250px" gap={6}>

// ❌ Wrong - needs minColumnWidth
<Grid autoFit="auto-fit" gap={6}>
```

### Issue: Deprecation warnings
**Warning**: `[Deprecation Warning] The 'hasBackground' prop is deprecated`

**Solution**: Migrate to className:
```tsx
// ✅ New approach
<Grid className="bg-white rounded-lg shadow-md p-6">

// ⚠️ Old approach (deprecated)
<Grid hasBackground isRounded hasShadow hasPadding>
```

## Migration Guide

### From Deprecated Props to className

**Before**:
```tsx
<Grid 
  cols={3}
  hasBackground 
  isBordered 
  hasShadow
  hasPadding
>
  {items}
</Grid>
```

**After**:
```tsx
<Grid 
  cols={3}
  className="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-md p-6"
>
  {items}
</Grid>
```

### From Old Grid (529 lines) to New Grid (182 lines)

The new Grid component is:
- **65% smaller** (182 vs 529 lines)
- **More maintainable** with focused responsibility
- **Better performance** with optimized class generation
- **Backward compatible** with deprecated props

## Examples

### E-commerce Product Grid
```tsx
function ProductGrid({ products }) {
  return (
    <Grid autoFit="auto-fit" minColumnWidth="280px" gap={8}>
      {products.map(product => (
        <Grid.Item key={product.id}>
          <Card className="hover:shadow-lg transition-shadow">
            <Card.Image src={product.image} alt={product.name} />
            <Card.Body>
              <Card.Title>{product.name}</Card.Title>
              <Card.Text className="text-gray-600">{product.price}</Card.Text>
              <Button>Add to Cart</Button>
            </Card.Body>
          </Card>
        </Grid.Item>
      ))}
    </Grid>
  );
}
```

### Dashboard Widgets
```tsx
function Dashboard() {
  return (
    <Grid cols={{ xs: 1, md: 2, lg: 4 }} gap={6}>
      <Grid.Item>
        <StatCard title="Users" value="12,345" icon="people" />
      </Grid.Item>
      <Grid.Item>
        <StatCard title="Revenue" value="$45,678" icon="revenue" />
      </Grid.Item>
      <Grid.Item>
        <StatCard title="Orders" value="1,234" icon="orders" />
      </Grid.Item>
      <Grid.Item>
        <StatCard title="Growth" value="+12%" icon="growth" />
      </Grid.Item>
    </Grid>
  );
}
```

### Form Layout
```tsx
function RegistrationForm() {
  return (
    <Grid cols={{ xs: 1, md: 2 }} gap={6}>
      <Grid.Item>
        <Input label="First Name" name="firstName" required />
      </Grid.Item>
      <Grid.Item>
        <Input label="Last Name" name="lastName" required />
      </Grid.Item>
      <Grid.Item span={2}>
        <Input label="Email" type="email" required />
      </Grid.Item>
      <Grid.Item span={2}>
        <Input label="Password" type="password" required />
      </Grid.Item>
      <Grid.Item span={2}>
        <Button variant="primary" type="submit">
          Register
        </Button>
      </Grid.Item>
    </Grid>
  );
}
```

## Performance Notes

- **Bundle Impact**: Small (182 lines, ~4KB)
- **Runtime Performance**: Optimized with React.useMemo for class generation
- **Render Optimization**: Memoize grid classes for static layouts

## Support

- **Test Page**: See `ComponentTestHub` for interactive examples
- **Documentation**: Check `ACUTRACK_DS_USAGE_GUIDE.md` for usage patterns
- **Changelog**: See `CHANGELOG.md` for version updates

