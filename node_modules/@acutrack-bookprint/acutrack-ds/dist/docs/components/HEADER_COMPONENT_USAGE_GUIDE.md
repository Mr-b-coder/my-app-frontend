# Header Component Usage Guide

## Latest Features (v1.0.68+)

The Header component is a comprehensive, industry-standard navigation component that provides a complete header solution for web applications. It includes responsive design, accessibility features, comprehensive theme support, and flexible composition patterns.

### ðŸ”§ v1.0.68 User Menu Improvements
- **Fixed Icon Display**: User menu items now properly display unique icons for each menu item
- **Dynamic Icon Integration**: Replaced hardcoded SVG icons with design system Icon component
- **Improved Hover Effects**: Fixed hover effects using proper design system theme classes
- **Theme Consistency**: Removed hardcoded values and replaced with theme-consistent styling
- **Better UX**: Enhanced user menu interaction with proper visual feedback
- **Danger Color Visibility**: Fixed danger color hover visibility in light mode with proper contrast

### ðŸŽ¨ v1.0.66 Complete Theme System Implementation
- **5 Theme Variants**: `default`, `brand`, `minimal`, `grey`, `dark`, `custom`
- **Smart Logo Integration**: Theme-aware logo switching with proper light/dark mode handling
- **Consistent Theming**: All Header sub-components now use theme classes
- **Performance Optimized**: Event-based theme updates instead of MutationObserver
- **Context Flexibility**: HeaderBreadcrumbs now works standalone or within Header context

### ðŸš€ v1.0.64 Mobile Responsiveness Improvements
- **Fixed Mobile Header Alignment**: Actions now properly align to the right on all screen sizes
- **Enhanced Mobile Navigation**: Improved mobile menu behavior and spacing
- **Better Responsive Design**: Optimized padding and typography scaling for mobile devices
- **Mobile-First Approach**: Improved layout structure for small screen experiences

## Table of Contents

1. [Quick Start](#quick-start)
2. [Component Overview](#component-overview)
3. [Basic Usage](#basic-usage)
4. [Advanced Features](#advanced-features)
5. [Responsive Design](#responsive-design)
6. [Accessibility Features](#accessibility-features)
7. [Theme Integration](#theme-integration)
8. [Developer Flexibility](#developer-flexibility)
9. [API Reference](#api-reference)
10. [Migration Guide](#migration-guide)
11. [Troubleshooting](#troubleshooting)

## Quick Start

```tsx
import { Header } from '@acutrack-bookprint/acutrack-ds';

function App() {
  return (
    <Header variant="default" sticky>
      <Header.Logo text="Acutrack" href="/" />
      <Header.Navigation>
        <Header.NavItem href="/dashboard" isActive>Dashboard</Header.NavItem>
        <Header.NavItem href="/products">Products</Header.NavItem>
        <Header.NavItem href="/settings">Settings</Header.NavItem>
      </Header.Navigation>
      <Header.Actions>
        <Header.Search placeholder="Search..." />
        <Header.Notifications count={3} />
        <Header.ThemeSwitcher />
        <Header.UserMenu user={{ name: "John Doe", email: "john@example.com" }}>
          <a href="/profile">Profile</a>
          <a href="/settings">Settings</a>
          <a href="/logout">Logout</a>
        </Header.UserMenu>
      </Header.Actions>
    </Header>
  );
}
```

## Component Overview

The Header component follows a compound component pattern, allowing for flexible composition:

### Core Components
- **`Header`** - Root container component
- **`Header.Logo`** - Brand logo with theme-aware variants
- **`Header.Navigation`** - Main navigation menu
- **`Header.NavItem`** - Individual navigation items
- **`Header.Breadcrumbs`** - Navigation breadcrumbs
- **`Header.Actions`** - Right-side action buttons
- **`Header.Search`** - Search functionality
- **`Header.Notifications`** - Notification bell with badge
- **`Header.ThemeSwitcher`** - Dark/light mode toggle
- **`Header.UserMenu`** - User dropdown menu
- **`Header.MobileMenu`** - Mobile hamburger menu

## Basic Usage

### Simple Header

```tsx
<Header>
  <Header.Logo text="MyApp" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
    <Header.NavItem href="/about">About</Header.NavItem>
  </Header.Navigation>
</Header>
```

### Header with Actions

```tsx
<Header sticky>
  <Header.Logo text="Dashboard" />
  <Header.Navigation>
    <Header.NavItem href="/dashboard" isActive>Dashboard</Header.NavItem>
    <Header.NavItem href="/reports">Reports</Header.NavItem>
  </Header.Navigation>
  <Header.Actions>
    <Header.Search placeholder="Search..." />
    <Header.Notifications count={5} />
    <Header.ThemeSwitcher />
  </Header.Actions>
</Header>
```

### Header with User Menu

```tsx
<Header>
  <Header.Logo text="Acutrack" />
  <Header.Navigation>
    <Header.NavItem href="/dashboard" isActive>Dashboard</Header.NavItem>
    <Header.NavItem href="/projects">Projects</Header.NavItem>
  </Header.Navigation>
  <Header.Actions>
    <Header.UserMenu 
      user={{ 
        name: "John Doe", 
        email: "john@acutrack.com",
        avatar: "/avatar.jpg",
        isOnline: true 
      }}
    >
      <a href="/profile">Profile</a>
      <a href="/settings">Settings</a>
      <a href="/help">Help</a>
      <a href="/logout" className="text-red-600">Logout</a>
    </Header.UserMenu>
  </Header.Actions>
</Header>
```

## Advanced Features

### Breadcrumbs Navigation

```tsx
<Header>
  <Header.Logo text="E-commerce" />
  <Header.Breadcrumbs 
    items={[
      { label: "Home", href: "/" },
      { label: "Products", href: "/products" },
      { label: "Electronics", href: "/products/electronics" },
      { label: "Smartphones", isActive: true }
    ]}
  />
  <Header.Actions>
    <Header.Search placeholder="Search products..." />
    <Header.Notifications count={2} />
  </Header.Actions>
</Header>
```

### Custom Logo Variants

```tsx
// Full logo (default)
<Header.Logo href="/" />

// Logo with custom text
<Header.Logo text="MyBrand" href="/" />

// Non-clickable logo
<Header.Logo text="Brand" isClickable={false} />
```

### Search with Custom Behavior

```tsx
<Header.Search 
  placeholder="Search..."
  onSearch={(query) => console.log('Searching for:', query)}
  className="w-64"
/>
```

### Expandable Search

```tsx
<Header.Search 
  variant="expandable"
  placeholder="Search..."
  onSearch={(query) => handleSearch(query)}
/>
```

### Notifications with Custom Actions

```tsx
<Header.Notifications 
  count={3}
  onClick={() => openNotifications()}
  className="relative"
/>
```

### Theme Switcher Integration

```tsx
<Header.ThemeSwitcher 
  onToggle={(isDark) => console.log('Theme changed:', isDark)}
/>
```

## Responsive Design

The Header component is fully responsive and adapts to different screen sizes:

### Mobile Behavior
- **Hamburger Menu**: Automatically shows on screens smaller than `md` (768px)
- **Responsive Actions**: Actions adapt to available space
- **Search**: Can be hidden on very small screens
- **Navigation**: Collapses into mobile drawer

### Responsive Configuration

```tsx
<Header>
  <Header.Logo text="Responsive App" />
  
  {/* Navigation - always visible */}
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
    <Header.NavItem href="/about">About</Header.NavItem>
  </Header.Navigation>
  
  {/* Actions - responsive spacing */}
  <Header.Actions>
    <Header.Search placeholder="Search..." />
    <Header.Notifications count={3} />
    <Header.ThemeSwitcher />
    <Header.UserMenu user={userData}>
      {/* Menu items */}
    </Header.UserMenu>
    {/* Mobile menu button - only visible on small screens */}
    <Header.MobileMenu />
  </Header.Actions>
</Header>
```

### Mobile Menu Content

```tsx
<Header.MobileMenu>
  {/* Mobile-specific navigation items */}
  <div className="px-4 py-2">
    <a href="/mobile-only" className="block py-2">Mobile Link</a>
  </div>
</Header.MobileMenu>
```

## Accessibility Features

### Skip Navigation

```tsx
<Header 
  skipToContent={true}
  skipToContentId="main-content"
>
  {/* Header content */}
</Header>

{/* Main content with proper ID */}
<main id="main-content">
  {/* Page content */}
</main>
```

### Keyboard Navigation
- **Tab Order**: Logical tab sequence through all interactive elements
- **Focus Management**: Visible focus indicators
- **Escape Key**: Closes dropdowns and mobile menu
- **Enter/Space**: Activates buttons and links

### ARIA Labels and Roles
- **Semantic HTML**: Uses proper `<header>`, `<nav>`, `<button>` elements
- **ARIA Labels**: Screen reader friendly labels
- **Live Regions**: Dynamic content announcements
- **Role Attributes**: Proper ARIA roles for complex components

### Color Contrast
- **WCAG 2.1 AA**: Meets 4.5:1 contrast ratio requirements
- **Focus Indicators**: High contrast focus states
- **Theme Support**: Maintains contrast in both light and dark modes

## Theme Integration

### Complete Theme System
The Header component now supports a comprehensive theme system with 5 predefined themes and custom color support:

```tsx
// Default theme - uses design system colors
<Header theme="default">
  <Header.Logo text="Default Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Brand theme - navy background with orange accents
<Header theme="brand">
  <Header.Logo text="Brand Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Minimal theme - clean white background
<Header theme="minimal">
  <Header.Logo text="Minimal Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Grey theme - dark grey background
<Header theme="grey">
  <Header.Logo text="Grey Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Dark theme - system dark colors
<Header theme="dark">
  <Header.Logo text="Dark Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>
```

### Smart Logo Integration
The Header logo automatically adapts based on the selected theme:

```tsx
// Default theme - logo changes with light/dark mode
<Header theme="default">
  <Header.Logo text="Dynamic Logo" /> {/* Changes with dark mode toggle */}
</Header>

// Brand theme - fixed dark logo
<Header theme="brand">
  <Header.Logo text="Brand Logo" /> {/* Always dark logo */}
</Header>

// Minimal theme - fixed grey light logo
<Header theme="minimal">
  <Header.Logo text="Minimal Logo" /> {/* Always grey light logo */}
</Header>
```

### Custom Theme Colors
```tsx
// Custom theme with your own colors
<Header 
  theme="custom"
  customColors={{
    backgroundColor: "#1a1a1a",
    textColor: "#ffffff",
    hoverColor: "#ff6b35",
    activeColor: "#ff6b35",
    borderColor: "#333333"
  }}
>
  <Header.Logo text="Custom Theme" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>
```

### Dark Mode Support
```tsx
// Default theme automatically adapts to dark mode
<div className="dark">
  <Header theme="default">
    <Header.Logo text="Dark Mode App" />
    {/* All components adapt to dark theme */}
  </Header>
</div>

// Other themes remain fixed regardless of dark mode
<div className="dark">
  <Header theme="brand">
    <Header.Logo text="Brand App" />
    {/* Always uses brand colors */}
  </Header>
</div>
```

### Theme-Aware Components
All Header sub-components automatically use the selected theme:

```tsx
<Header theme="brand">
  <Header.Logo text="Brand App" />           {/* Navy background, white text */}
  <Header.Navigation>                        {/* White text, orange hover */}
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
  <Header.Actions>
    <Header.Search />                        {/* Navy input, white text */}
    <Header.Notifications count={3} />       {/* White icon, orange hover */}
    <Header.UserMenu user={user} />          {/* White text, orange hover */}
  </Header.Actions>
</Header>
```

## Developer Flexibility

### Conditional Rendering

```tsx
function AppHeader({ user, showSearch = true, showNotifications = true }) {
  return (
    <Header>
      <Header.Logo text="Flexible App" />
      <Header.Navigation>
        <Header.NavItem href="/" isActive>Home</Header.NavItem>
        <Header.NavItem href="/about">About</Header.NavItem>
      </Header.Navigation>
      <Header.Actions>
        {showSearch && <Header.Search placeholder="Search..." />}
        {showNotifications && <Header.Notifications count={3} />}
        <Header.ThemeSwitcher />
        {user && (
          <Header.UserMenu user={user}>
            <a href="/profile">Profile</a>
            <a href="/logout">Logout</a>
          </Header.UserMenu>
        )}
      </Header.Actions>
    </Header>
  );
}
```

### Custom Components Integration

```tsx
<Header>
  <Header.Logo text="Custom App" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
  <Header.Actions>
    {/* Custom component */}
    <div className="flex items-center space-x-2">
      <button className="px-3 py-1 bg-blue-500 text-white rounded">
        Custom Action
      </button>
    </div>
    <Header.UserMenu user={userData}>
      <a href="/profile">Profile</a>
    </Header.UserMenu>
  </Header.Actions>
</Header>
```

### Logo Customization

```tsx
// Hide logo completely
<Header>
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Custom logo with text
<Header>
  <Header.Logo text="My Brand" href="/dashboard" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// Full logo (no text)
<Header>
  <Header.Logo href="/" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
</Header>
```

## API Reference

### Header Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `variant` | `'default' \| 'website'` | `'default'` | Header variant style |
| `size` | `'sm' \| 'md' \| 'lg'` | `'md'` | Header height size |
| `sticky` | `boolean` | `false` | Whether header is sticky |
| `skipToContent` | `boolean` | `true` | Show skip navigation link |
| `skipToContentId` | `string` | `'main-content'` | ID of main content element |
| `className` | `string` | - | Additional CSS classes |
| `children` | `ReactNode` | - | Header content |

### Header.Logo Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `text` | `string` | - | Custom text to display with logo |
| `href` | `string` | `'#'` | Logo link destination |
| `isClickable` | `boolean` | `true` | Whether logo is clickable |
| `className` | `string` | - | Additional CSS classes |

### Header.NavItem Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `href` | `string` | - | Navigation link destination |
| `isActive` | `boolean` | `false` | Whether item is active |
| `isDisabled` | `boolean` | `false` | Whether item is disabled |
| `className` | `string` | - | Additional CSS classes |
| `children` | `ReactNode` | - | Navigation item content |

### Header.Breadcrumbs Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `items` | `BreadcrumbItem[]` | - | Array of breadcrumb items |
| `separator` | `ReactNode` | `'>'` | Separator between items |
| `className` | `string` | - | Additional CSS classes |

### Header.Search Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `placeholder` | `string` | - | Search input placeholder |
| `variant` | `'default' \| 'expandable'` | `'default'` | Search variant |
| `onSearch` | `(query: string) => void` | - | Search callback |
| `className` | `string` | - | Additional CSS classes |

### Header.Notifications Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `count` | `number` | - | Notification count |
| `onClick` | `() => void` | - | Click handler |
| `className` | `string` | - | Additional CSS classes |

### Header.UserMenu Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `user` | `UserConfig` | - | User information object |
| `links` | `UserMenuLink[]` | - | Array of menu links |
| `className` | `string` | - | Additional CSS classes |

### UserConfig Interface

```tsx
interface UserConfig {
  name: string;
  avatar?: string;
}
```

### UserMenuLink Interface

```tsx
interface UserMenuLink {
  href: string;
  label: string;
  icon?: string;
  color?: 'default' | 'danger';
}
```

### UserMenu Usage Example

```tsx
<Header.UserMenu 
  user={{
    name: "John Doe",
    avatar: "https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=JD"
  }} 
  links={[
    { href: "#profile", label: "Profile", icon: "person" },
    { href: "#settings", label: "Settings", icon: "settings" },
    { href: "#help", label: "Help & Support", icon: "help" },
    { href: "#logout", label: "Logout", icon: "logout", color: "danger" }
  ]} 
/>
```

### BreadcrumbItem Interface

```tsx
interface BreadcrumbItem {
  label: string;
  href?: string;
  isActive?: boolean;
}
```

## UserMenu Component Enhancements (v1.0.68+)

### What's New

The UserMenu component has been significantly improved with better icon handling, hover effects, and theme consistency.

#### Icon Integration
- **Dynamic Icons**: Now uses the design system Icon component instead of hardcoded SVGs
- **Unique Icons**: Each menu item displays its own unique icon
- **Material Icons**: Consistent with the rest of the design system

#### Hover Effects
- **Theme Consistent**: Uses proper design system theme classes
- **Better Visibility**: Improved hover effects for all menu items
- **Danger Color**: Enhanced visibility for danger-colored items (like logout)

#### Example Usage

```tsx
<Header.UserMenu 
  user={{
    name: "John Doe",
    avatar: "https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=JD"
  }} 
  links={[
    { href: "#profile", label: "Profile", icon: "person" },
    { href: "#settings", label: "Settings", icon: "settings" },
    { href: "#help", label: "Help & Support", icon: "help" },
    { href: "#logout", label: "Logout", icon: "logout", color: "danger" }
  ]} 
/>
```

#### Hover Effect Classes

```tsx
// Default hover effect
'hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary'

// Danger color hover effect
'hover:bg-system-error-dark hover:text-white dark:hover:bg-system-error-dark dark:hover:text-white'
```

#### Best Practices

- **Use Meaningful Icons**: Choose icons that clearly represent the action
- **Color Coding**: Use `color: "danger"` for destructive actions like logout
- **Consistent Sizing**: All icons use `size="sm"` for consistency
- **Theme Integration**: Hover effects automatically adapt to light/dark themes

## Migration Guide

### From v1.0.67 to v1.0.68+

#### UserMenu Improvements
- **Icon Integration**: UserMenu now uses dynamic Icon component instead of hardcoded SVGs
- **Hover Effects**: Improved hover effects using proper design system theme classes
- **Danger Color**: Enhanced visibility for danger-colored menu items

#### Breaking Changes
- None - all changes are backward compatible

#### New Features
- **Dynamic Icons**: Each menu item can now display unique icons
- **Better Hover Effects**: Theme-consistent hover backgrounds
- **Enhanced Accessibility**: Improved visual feedback for all menu items

#### Migration Steps
1. **Update UserMenu Usage**: No changes required for existing implementations
2. **Add Icons**: Optionally add icons to existing menu items for better UX
3. **Test Hover Effects**: Verify hover effects work correctly in your theme

### From v1.0.62 to v1.0.63+

#### New Features Added
- **Breadcrumbs Component**: `Header.Breadcrumbs` for navigation hierarchy
- **Skip Navigation**: Automatic accessibility skip links
- **Enhanced Accessibility**: Improved ARIA labels and keyboard navigation
- **Better Mobile Support**: Improved responsive behavior

#### Breaking Changes
- None - all changes are additive

#### New Props
```tsx
// New Header props
<Header 
  skipToContent={true}           // New: Show skip link
  skipToContentId="main-content" // New: Skip target ID
>
  {/* New component */}
  <Header.Breadcrumbs items={breadcrumbItems} />
</Header>
```

#### Updated Usage
```tsx
// Before (v1.0.62)
<Header>
  <Header.Logo text="App" />
  <Header.Navigation>
    <Header.NavItem href="/" active>Home</Header.NavItem>
  </Header.Navigation>
</Header>

// After (v1.0.63+)
<Header skipToContent>
  <Header.Logo text="App" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
  <Header.Breadcrumbs items={breadcrumbs} />
</Header>
```

## Troubleshooting

### Common Issues

#### Header Not Responsive
```tsx
// Ensure mobile menu is included
<Header>
  <Header.Logo text="App" />
  <Header.Navigation>
    <Header.NavItem href="/" isActive>Home</Header.NavItem>
  </Header.Navigation>
  <Header.Actions>
    <Header.MobileMenu /> {/* Required for mobile */}
  </Header.Actions>
</Header>
```

#### Skip Link Not Working
```tsx
// Ensure target element exists
<Header skipToContentId="main-content">
  {/* Header content */}
</Header>

<main id="main-content"> {/* Must match skipToContentId */}
  {/* Page content */}
</main>
```

#### Theme Not Applying
```tsx
// Ensure dark mode class is applied to parent
<div className="dark">
  <Header>
    <Header.Logo text="Themed App" />
    {/* Components will adapt to dark theme */}
  </Header>
</div>
```

#### Search Not Working
```tsx
// Provide onSearch callback
<Header.Search 
  placeholder="Search..."
  onSearch={(query) => {
    console.log('Searching for:', query);
    // Implement search logic
  }}
/>
```

### Performance Tips

1. **Memoize User Data**: Prevent unnecessary re-renders
```tsx
const userData = useMemo(() => ({
  name: "John Doe",
  email: "john@example.com"
}), []);

<Header.UserMenu user={userData}>
  {/* Menu items */}
</Header.UserMenu>
```

2. **Conditional Rendering**: Only render what's needed
```tsx
<Header.Actions>
  {showSearch && <Header.Search placeholder="Search..." />}
  {user && <Header.UserMenu user={user} />}
</Header.Actions>
```

3. **Stable References**: Use stable references for callbacks
```tsx
const handleSearch = useCallback((query: string) => {
  // Search logic
}, []);

<Header.Search onSearch={handleSearch} />
```

## Best Practices

### Accessibility
- Always provide meaningful labels
- Use semantic HTML elements
- Ensure keyboard navigation works
- Test with screen readers

### Performance
- Use React.memo for expensive components
- Implement proper loading states
- Optimize re-renders with useMemo/useCallback

### Design
- Keep navigation items concise
- Use consistent spacing
- Follow design system guidelines
- Test on multiple screen sizes

### Code Organization
- Use compound components for flexibility
- Keep components focused and single-purpose
- Provide clear prop interfaces
- Document complex behaviors

---

## Support

For additional support or feature requests, please refer to the main design system documentation or contact the development team.

**Version**: 1.0.63+  
**Last Updated**: December 2024  
**Compatibility**: React 18+, TypeScript 4.5+
