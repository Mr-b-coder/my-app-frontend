# Table Component Documentation

## Overview

The Table component is a compound, accessible table for the Acutrack Design System. It uses semantic HTML (`<table>`, `<thead>`, `<tbody>`, `<tfoot>`, `<tr>`, `<th>`, `<td>`) with design tokens, supports fixed or auto layout, configurable column widths, row selection, and flexible padding.

## Features

### Core features
- **Compound API**: `Table`, `Table.Header`, `Table.Body`, `Table.Footer`, `Table.Row`, `Table.HeadCell`, `Table.Cell`, `Table.Checkbox`
- **Horizontal scrolling (default)**: Tables allow horizontal scroll by default (`allowHorizontalScroll={true}`). The table fills the full width of its container (e.g. card) when content fits; when content is wider than the container, a horizontal scrollbar appears instead of smushing cells. Set `allowHorizontalScroll={false}` to use fixed layout and fit columns to the container.
- **Column width**: Set `width` on `Table.HeadCell` (and optionally `Table.Cell`). With `allowHorizontalScroll={false}` (fixed layout), the first row defines column widths; body columns inherit from header.
- **Table layout**: When `allowHorizontalScroll` is true, the table uses auto layout and `w-full min-w-max` so it fills the container and overflows when needed. When false, `tableLayout="fixed"` is used so column widths are respected.
- **Minimum cell width**: Numeric widths below 48px are clamped to 48px so cells can fit default padding (`md` = 48px horizontal). Use `cellPadding="none"` / `headerPadding="none"` for compact or narrow columns.
- **Padding levels**: `cellPadding` and `headerPadding` per table: `'none' | 'sm' | 'md' | 'lg' | 'xl'`.
- **Sizes**: `size`: `xs` | `sm` | `md` | `lg` | `xl`.
- **Colors**: `color`: `primary` | `success` | `warning` | `danger` | `info` | `neutral`.
- **Striped / hover**: `isStriped`, `isHoverable`.
- **Borders, shadow, rounded**: `isBordered`, `hasShadow`, `isRounded`, `isResponsive`, `isFullWidth`, `hasFixedWidth`.
- **Row state**: `Table.Row`: `isSelected`, `selectionColor`, `isHighlighted`, `highlightColor`, `isDisabled`, `isClickable`, `hasHoverEffect`, etc.
- **Cell alignment**: `Table.HeadCell` and `Table.Cell`: `isCentered`, `isRightAligned`.
- **Header**: Sortable/resizable hints, `headerActions`, `headerRender`, `headerIcon`, `headerText`.
- **Selection**: `Table.Checkbox` for header/row selection with `isHeader`, `isChecked`, `isIndeterminate`.

### Header structure (important)
- `Table.Header` renders `<thead>` and expects **direct** `Table.Row` children (no extra wrapper `<tr>`).
- The **first row** of the table defines column widths when using `tableLayout="fixed"`. Use one `Table.Row` inside `Table.Header` with `Table.HeadCell`s so body columns align.

### Column width (recommended usage)
1. Set `width` only on `Table.HeadCell`; body columns inherit when using fixed layout (`allowHorizontalScroll={false}`).
2. Numeric `width` is in `px`; string (e.g. `"20%"`) is passed through. Both `width` and `minWidth` are set so columns do not shrink.
3. Values &lt; 48px are clamped to 48px; for narrower columns use `cellPadding="none"` and `headerPadding="none"` on the table.

### Horizontal scrolling and parent container
- The table root uses `overflow-x-auto` and, when `allowHorizontalScroll` is true, `min-w-0` on the scroll container so it stays bounded by its parent (e.g. in flex or grid layouts). This ensures the horizontal scrollbar appears when content is wider than the container, consistent with VirtualizedTable behavior.
- The table element uses `w-full min-w-max` when horizontal scroll is enabled: it fills the card/container when content fits, and grows to content width (triggering scroll) when content is wider.

---

## Current updates (recent changes)

- **Horizontal scroll by default**: New prop `allowHorizontalScroll` (default `true`). When true, the table fills the full width of its container and shows a horizontal scrollbar when content is wider than the container (no cell smushing). Set to `false` for the previous fixed-layout behavior (columns fit to container).
- **Scroll container in flex/grid**: When `allowHorizontalScroll` is true, the table root applies `min-w-0` so the scroll container stays bounded by its parent; the horizontal scrollbar appears correctly when the table is inside flex or grid layouts (e.g. cards).
- **Table width**: With `allowHorizontalScroll`, the table uses `w-full min-w-max`: full width when content fits, overflow with scroll when content is wider.
- **Header structure**: `Table.Header` renders `<thead>{children}</thead>` (no inner wrapper `<tr>`). Use `<Table.Header><Table.Row>…</Table.Row></Table.Header>` so the first row correctly defines column widths.
- **Width and minWidth**: When `width` is set on `Table.HeadCell` or `Table.Cell`, both `width` and `minWidth` are applied (same value) so columns do not collapse and header/body stay aligned.
- **Minimum width**: `MIN_TABLE_CELL_PX = 48`. Numeric `width` values are clamped for both HeadCell and Cell; use `cellPadding="none"` / `headerPadding="none"` for very narrow columns.
- **Header cell content**: Header cell content is wrapped in a flex container with `min-w-0 overflow-hidden` so headers respect column width.

---

## Installation / import

The component is part of the Acutrack Design System:

```ts
import { Table } from '@acutrack-bookprint/acutrack-ds';
```

---

## Subcomponents and props (summary)

### Table (root)
| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `allowHorizontalScroll` | `boolean` | `true` | When true, table fills container width and shows horizontal scroll when content is wider. When false, fixed layout (columns fit/smush to container). |
| `tableLayout` | `'auto' \| 'fixed'` | `'fixed'` | Used when `allowHorizontalScroll` is false; ignored when true (auto layout used). |
| `cellPadding` | `'none' \| 'sm' \| 'md' \| 'lg' \| 'xl'` | `'md'` | Body cell padding. |
| `headerPadding` | `'none' \| 'sm' \| 'md' \| 'lg' \| 'xl'` | `'md'` | Header cell padding. |
| `size` | `TableSize` | `'md'` | Text/size scale. |
| `color` | `TableColor` | `'primary'` | Theme color. |
| `isStriped` | `boolean` | `false` | Alternating row background. |
| `isHoverable` | `boolean` | `false` | Row hover background. |
| `isBordered` | `boolean` | `true` | Table border. |
| `isRounded` | `boolean` | `true` | Rounded corners. |
| `hasShadow` | `boolean` | `false` | Box shadow. |
| `isResponsive` | `boolean` | `true` | Horizontal scroll on small screens. |
| `isFullWidth` | `boolean` | `true` | Full width. |
| `hasFixedWidth` | `boolean` | `false` | Fixed width. |
| `className`, `containerClassName`, `style` | — | — | Styling. |

### Table.Header
Renders `<thead>`. Props: `containerClassName`, `className`, `style`, **`headerHeight`** (v1.0.91), `hasBorder`, `hasBackground`, `isRounded`, `isSticky`, `isCollapsible`, `isCollapsed`, plus HTML section attributes. **`headerHeight`**: optional `number` (treated as px) or `string` (e.g. `'48px'`, `'3rem'`) to set a custom header row height.

### Table.Body
Renders `<tbody>`. Props: `containerClassName`, `className`, `style`, `hasBorder`, `hasBackground`, `hasDividers`, `hasAlternatingColors`, `isScrollable`, `hasFixedHeight`, plus HTML section attributes. When `isScrollable` is true, the body uses the `custom-scrollbar` class so vertical scroll has themed scrollbars (light/dark) consistent with the design system (v1.0.91).

### Table.Footer
Renders `<tfoot>`. Props: `containerClassName`, `className`, `style`, `hasBorder`, `hasBackground`, `isRounded`, `isSticky`, `isCollapsible`, `isCollapsed`, plus HTML section attributes.

### Table.Row
Renders `<tr>`. Props: `isSelected`, `selectionColor`, `isHighlighted`, `highlightColor`, `isDisabled`, `isClickable`, `hasHoverEffect`, `hasFocusEffect`, `hasActiveEffect`, `containerClassName`, `className`, `style`, plus HTML row attributes.

### Table.HeadCell
Renders `<th>`. Key props:
| Prop | Type | Description |
|------|------|-------------|
| `width` | `string \| number` | Column width (px if number; &lt; 48 clamped to 48). |
| `isCentered` | `boolean` | Center content. |
| `isRightAligned` | `boolean` | Right-align content. |
| `isSortable`, `isSorted`, `sortDirection` | — | Sort UI hint. |
| `headerActions`, `headerRender`, `headerIcon`, `headerText` | — | Custom header content. |

### Table.Cell
Renders `<td>`. Key props:
| Prop | Type | Description |
|------|------|-------------|
| `width` | `string \| number` | Cell width (optional; body inherits from header with fixed layout). Numeric &lt; 48 clamped to 48. |
| `isCentered` | `boolean` | Center content. |
| `isRightAligned` | `boolean` | Right-align content. |
| `isTruncated` | `boolean` | Truncate text. |
| `isHighlighted`, `highlightColor` | — | Highlight background. |

### Table.Checkbox
Renders `<th>` or `<td>` with a checkbox. Props: `id`, `label`, `isHeader`, `isChecked`, `isIndeterminate`, `isDisabled`, `hasLabel`, `hasTooltip`, `tooltipText`, plus Checkbox props.

---

## Usage examples

### Basic table (horizontal scroll by default)

Tables fill the container width and show a horizontal scrollbar when content is wider. No prop needed.

```tsx
<Table>
  <Table.Header>
    <Table.Row>
      <Table.HeadCell width={120}>ID</Table.HeadCell>
      <Table.HeadCell width={250}>Name</Table.HeadCell>
      <Table.HeadCell width="20%">Role</Table.HeadCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    <Table.Row>
      <Table.Cell>1</Table.Cell>
      <Table.Cell>Jane</Table.Cell>
      <Table.Cell>Admin</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>
```

### Fixed layout (fit to container, no horizontal scroll)

Set `allowHorizontalScroll={false}` when you want columns to fit the container and the first row to define column widths.

```tsx
<Table allowHorizontalScroll={false}>
  <Table.Header>
    <Table.Row>
      <Table.HeadCell width={120}>ID</Table.HeadCell>
      <Table.HeadCell width={250}>Name</Table.HeadCell>
      <Table.HeadCell width="20%">Role</Table.HeadCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    <Table.Row>
      <Table.Cell>1</Table.Cell>
      <Table.Cell>Jane</Table.Cell>
      <Table.Cell>Admin</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>
```

### Narrow columns (icon / checkbox) with padding none

```tsx
<Table cellPadding="none" headerPadding="none">
  <Table.Header>
    <Table.Row>
      <Table.HeadCell width={40} isCentered><Icon size="sm">drag_indicator</Icon></Table.HeadCell>
      <Table.HeadCell width={48} isCentered><Icon size="sm">check_box_outline_blank</Icon></Table.HeadCell>
      <Table.HeadCell width={200}>Product</Table.HeadCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    <Table.Row>
      <Table.Cell isCentered><Icon size="sm">drag_indicator</Icon></Table.Cell>
      <Table.Checkbox id="r1" label="Select row 1" />
      <Table.Cell>Wireless Mouse</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>
```

### Striped, hoverable, with footer

```tsx
<Table isStriped isHoverable>
  <Table.Header>
    <Table.Row>
      <Table.HeadCell width={100}>Name</Table.HeadCell>
      <Table.HeadCell width={80}>Score</Table.HeadCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    {items.map(item => (
      <Table.Row key={item.id}>
        <Table.Cell>{item.name}</Table.Cell>
        <Table.Cell isRightAligned>{item.score}</Table.Cell>
      </Table.Row>
    ))}
  </Table.Body>
  <Table.Footer>
    <Table.Row>
      <Table.Cell colSpan={2}>Total: {total}</Table.Cell>
    </Table.Row>
  </Table.Footer>
</Table>
```

### Row selection with Table.Checkbox

```tsx
<Table>
  <Table.Header>
    <Table.Row>
      <Table.HeadCell width={48}>
        <Table.Checkbox id="head" label="Select all" isHeader isChecked={allSelected} isIndeterminate={someSelected} onChange={toggleAll} />
      </Table.HeadCell>
      <Table.HeadCell width={200}>Name</Table.HeadCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    {rows.map(row => (
      <Table.Row key={row.id} isSelected={selected.has(row.id)}>
        <Table.Cell>
          <Table.Checkbox id={row.id} label={`Select ${row.name}`} isChecked={selected.has(row.id)} onChange={() => toggle(row.id)} />
        </Table.Cell>
        <Table.Cell>{row.name}</Table.Cell>
      </Table.Row>
    ))}
  </Table.Body>
</Table>
```

---

## Demo on test page

The **Table test page** includes:

1. **Horizontal scroll (default)**: A wide table inside a narrow container (max-width 400px) to demonstrate that the table fills the container and shows a horizontal scrollbar when content is wider.
2. **Column width & narrow columns (dev demo)**:
   - **Minimum width**: A table with `width={25}` on some HeadCells; they render at 48px (clamped).
   - **Narrow columns**: A table with `cellPadding="none"` and `headerPadding="none"`, with icon and checkbox columns and a code snippet.
   - **HeadCell-only width**: A code example that sets `width` only on `Table.HeadCell` so body columns inherit (when using `allowHorizontalScroll={false}`).
3. **Basic Table – Interactive Playground**: Toggle **Horizontal scroll** to compare default (scroll when wide) vs fixed layout (fit to container).
