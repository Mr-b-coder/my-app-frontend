# Tooltip Component Usage Guide

## Overview

The Tooltip component provides contextual information when users hover over or focus on an element. It follows industry standards (Chakra UI / Material UI patterns) and supports various placement options, variants, and interactive features.

## Basic Usage

```tsx
import { Tooltip } from '@acutrack-bookprint/acutrack-ds';

// Basic tooltip
<Tooltip label="This is a helpful tooltip" placement="top">
  <Button>Hover me</Button>
</Tooltip>

// Tooltip with icon
<Tooltip label="Additional information" icon="info" placement="top">
  <Icon>help</Icon>
</Tooltip>
```

## Important: Tooltip Trigger Behavior

**⚠️ Important**: The Tooltip component wraps its `children` in a container div with hover event handlers. This means **the entire wrapped element becomes the tooltip trigger**.

### ❌ Incorrect Usage

```tsx
// This will trigger tooltip when hovering anywhere on the card
<Tooltip label="Info" icon="info">
  <Card>
    <div>Card content</div>
    <Icon>info</Icon>
  </Card>
</Tooltip>
```

### ✅ Correct Usage

```tsx
// Option 1: Wrap only the icon in Tooltip (recommended)
// Note: Explicitly set overflowVisible to ensure tooltips render outside card
<Card overflowVisible>
  <div>Card content</div>
  <Tooltip label="Info" icon="info" placement="top">
    <Icon>info</Icon>
  </Tooltip>
</Card>

// Option 2: Wrap the icon in a button/clickable element
<Card overflowVisible>
  <div>Card content</div>
  <Tooltip label="Info" icon="info" placement="top">
    <button className="p-2 hover:bg-bg-tertiary rounded">
      <Icon>info</Icon>
    </button>
  </Tooltip>
</Card>

// Option 3: Use inline-block wrapper for icon only
<Card overflowVisible>
  <div>Card content</div>
  <Tooltip label="Info" icon="info" placement="top">
    <span className="inline-block cursor-help">
      <Icon>info</Icon>
    </span>
  </Tooltip>
</Card>
```

**Important Note**: While Card has `overflowVisible={true}` as the default, you may need to explicitly set `overflowVisible` prop (or `overflowVisible={true}`) to ensure tooltips and other overlays render correctly outside the card boundaries. This is especially important when:
- Tooltips are getting clipped/buried inside the card
- Dropdown menus or popovers need to extend beyond card edges
- Parent containers have conflicting overflow styles

## Props

### Core Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `label` | `string` | **required** | The tooltip text content |
| `children` | `React.ReactNode` | **required** | The element that triggers the tooltip |
| `icon` | `string` | `undefined` | Optional icon name to display in tooltip |
| `placement` | `TooltipPlacement` | `'top'` | Tooltip position relative to trigger |
| `variant` | `TooltipVariant` | `'default'` | Color variant (default, primary, success, warning, error, info, accent) |
| `size` | `TooltipSize` | `'md'` | Size variant (sm, md, lg) |
| `hasArrow` | `boolean` | `true` | Whether to show arrow pointing to trigger |
| `maxWidth` | `string \| number` | `'200px'` | Maximum width of tooltip |

### Behavior Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `isDisabled` | `boolean` | `false` | Disable tooltip |
| `isInteractive` | `boolean` | `false` | Tooltip stays open when hovering over it |
| `openDelay` | `number` | `0` | Delay before showing tooltip (ms) |
| `closeDelay` | `number` | `0` | Delay before hiding tooltip (ms) |
| `followCursor` | `boolean` | `false` | Tooltip follows mouse cursor |
| `usePortal` | `boolean` | `true` | Render tooltip in portal (outside DOM hierarchy) |
| `enableCollisionDetection` | `boolean` | `true` | Automatically adjust position to stay in viewport |
| `animation` | `'fade' \| 'scale' \| 'slide'` | `'fade'` | Animation type |
| `enableKeyboard` | `boolean` | `true` | Show/hide on focus/blur |
| `enableTouch` | `boolean` | `true` | Show on touch (mobile) |

### Controlled Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `isOpen` | `boolean` | `undefined` | Controlled tooltip visibility |
| `isControlled` | `boolean` | `false` | Use controlled mode |
| `onOpen` | `() => void` | `undefined` | Callback when tooltip opens |
| `onClose` | `() => void` | `undefined` | Callback when tooltip closes |

## Placement Options

```tsx
// Top placements
<Tooltip placement="top">...</Tooltip>
<Tooltip placement="top-start">...</Tooltip>
<Tooltip placement="top-end">...</Tooltip>

// Bottom placements
<Tooltip placement="bottom">...</Tooltip>
<Tooltip placement="bottom-start">...</Tooltip>
<Tooltip placement="bottom-end">...</Tooltip>

// Left placements
<Tooltip placement="left">...</Tooltip>
<Tooltip placement="left-start">...</Tooltip>
<Tooltip placement="left-end">...</Tooltip>

// Right placements
<Tooltip placement="right">...</Tooltip>
<Tooltip placement="right-start">...</Tooltip>
<Tooltip placement="right-end">...</Tooltip>
```

## Variants

```tsx
<Tooltip variant="default" label="Default tooltip">...</Tooltip>
<Tooltip variant="primary" label="Primary tooltip">...</Tooltip>
<Tooltip variant="success" label="Success tooltip">...</Tooltip>
<Tooltip variant="warning" label="Warning tooltip">...</Tooltip>
<Tooltip variant="error" label="Error tooltip">...</Tooltip>
<Tooltip variant="info" label="Info tooltip">...</Tooltip>
<Tooltip variant="accent" label="Accent tooltip">...</Tooltip>
```

## Examples

### Basic Tooltip

```tsx
<Tooltip label="Click to save" placement="top">
  <Button>Save</Button>
</Tooltip>
```

### Tooltip with Icon

```tsx
<Tooltip label="Additional information" icon="info" variant="info" placement="top">
  <Icon>help</Icon>
</Tooltip>
```

### Interactive Tooltip

```tsx
<Tooltip 
  label="This tooltip stays open when you hover over it"
  isInteractive={true}
  placement="top"
>
  <Button>Interactive</Button>
</Tooltip>
```

### Tooltip with Delay

```tsx
<Tooltip 
  label="Shows after 500ms"
  openDelay={500}
  closeDelay={200}
  placement="top"
>
  <Button>Delayed</Button>
</Tooltip>
```

### Follow Cursor

```tsx
<Tooltip 
  label="Follows your cursor"
  followCursor={true}
  placement="top"
>
  <Button>Follow Cursor</Button>
</Tooltip>
```

### Tooltip on Icon in Card

```tsx
// Explicitly set overflowVisible to ensure tooltip renders outside card
// Keep structure simple - Tooltip wrapper now has w-fit by default
<Card overflowVisible>
  <Card.Body>
    <div className="flex items-center justify-between">
      <div className="flex items-center gap-2">
        <h3>Total Books</h3>
        <Tooltip label="Total number of books in the Project" placement="top">
          <Icon className="cursor-help text-text-tertiary dark:text-dark-text-tertiary" size="sm">help</Icon>
        </Tooltip>
      </div>
      <div className="w-10 h-10 rounded-full bg-system-info flex items-center justify-center">
        <Icon className="text-white">menu_book</Icon>
      </div>
    </div>
  </Card.Body>
</Card>
```

### Controlled Tooltip

```tsx
const [isOpen, setIsOpen] = useState(false);

<Tooltip 
  label="Controlled tooltip"
  isOpen={isOpen}
  isControlled={true}
  onOpen={() => setIsOpen(true)}
  onClose={() => setIsOpen(false)}
  placement="top"
>
  <Button onClick={() => setIsOpen(!isOpen)}>Toggle</Button>
</Tooltip>
```

## Common Patterns

### Tooltip on Icon Button

```tsx
<Tooltip label="Delete item" variant="error" placement="top">
  <Button variant="ghost" size="sm">
    <Icon>delete</Icon>
  </Button>
</Tooltip>
```

### Tooltip on Disabled Button

```tsx
<Tooltip label="This action is disabled" placement="top">
  <span className="inline-block">
    <Button disabled>Disabled</Button>
  </span>
</Tooltip>
```

### Multiple Tooltips in a Row

```tsx
<div className="flex gap-2">
  <Tooltip label="Edit" placement="top">
    <Button variant="ghost" size="sm">
      <Icon>edit</Icon>
    </Button>
  </Tooltip>
  <Tooltip label="Delete" variant="error" placement="top">
    <Button variant="ghost" size="sm">
      <Icon>delete</Icon>
    </Button>
  </Tooltip>
  <Tooltip label="Share" placement="top">
    <Button variant="ghost" size="sm">
      <Icon>share</Icon>
    </Button>
  </Tooltip>
</div>
```

## Best Practices

1. **Keep tooltip text concise** - Tooltips should provide brief, helpful information
2. **Use appropriate placement** - Choose placement that doesn't obstruct important content
3. **Wrap only the trigger element** - Don't wrap entire cards or large components
4. **Use icons for clarity** - Icons help users quickly understand tooltip context
5. **Consider mobile users** - Enable touch support for mobile devices
6. **Use interactive mode sparingly** - Only for tooltips with actionable content
7. **Provide keyboard access** - Tooltips should work with keyboard navigation

## Troubleshooting

### Tooltip shows on entire card instead of just icon

**Problem**: Tooltip triggers when hovering anywhere on a card, not just the icon.

**Solution**: Wrap only the icon in the Tooltip component, ensure the Tooltip wrapper has `w-fit`, and explicitly set `overflowVisible` on Card:

```tsx
// ❌ Wrong - wraps entire card
<Tooltip label="Info">
  <Card>...</Card>
</Tooltip>

// ❌ Also wrong - nested divs cause expansion
<div className="inline-block w-fit">
  <Tooltip label="Info">
    <span className="inline-block w-fit">
      <Icon>info</Icon>
    </span>
  </Tooltip>
</div>

// ✅ Correct - simple, direct wrapper
<Card overflowVisible>
  <div className="flex items-center gap-2">
    <h3>Title</h3>
    <Tooltip label="Info" placement="top">
      <Icon className="cursor-help">help</Icon>
    </Tooltip>
  </div>
</Card>
```

**Key Points**:
- Tooltip wrapper div now has `w-fit` by default (fixed in component)
- Remove unnecessary nested divs/spans
- Keep the Tooltip wrapper as minimal as possible
- Use `cursor-help` on the icon for better UX

### Tooltip getting buried inside card

**Problem**: Tooltip content is clipped or buried inside the card boundaries.

**Solution**: Explicitly set `overflowVisible` prop on the Card component:

```tsx
// ✅ Explicitly set overflowVisible (recommended)
<Card overflowVisible>
  <Tooltip label="Info" placement="top">
    <Icon>info</Icon>
  </Tooltip>
</Card>

// Or use the full prop syntax
<Card overflowVisible={true}>
  <Tooltip label="Info" placement="top">
    <Icon>info</Icon>
  </Tooltip>
</Card>
```

**Note**: While Card defaults to `overflowVisible={true}`, explicitly setting it ensures tooltips render correctly, especially when parent containers have conflicting overflow styles or in complex layouts.

### Tooltip not showing

- Check if `isDisabled` is set to `true`
- Verify `label` prop is provided
- Check if `usePortal` is causing z-index issues
- Ensure trigger element is not disabled

### Tooltip position incorrect

- Enable `enableCollisionDetection` (default: true)
- Adjust `placement` prop
- Check parent container overflow settings
- Verify `usePortal` is enabled (default: true)

## Accessibility

- Tooltips are automatically hidden from screen readers when not visible
- Keyboard navigation is enabled by default (`enableKeyboard={true}`)
- Tooltips use `role="tooltip"` for proper ARIA semantics
- Focus management ensures tooltips don't block keyboard navigation

## Related Components

- **Badge**: Has built-in tooltip support via `hasTooltip` prop
- **Button**: Common trigger for tooltips
- **Icon**: Often used as tooltip trigger

