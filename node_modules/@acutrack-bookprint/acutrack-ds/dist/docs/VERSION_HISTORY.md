# Version History - Quick Reference

This document provides a quick overview of what changed in each version of the Acutrack Design System.

## üöÄ Latest Version: 1.0.88

**Release Date**: 2026-01-27  
**Status**: ‚úÖ Ready  
**Improvements**: Sidebar hides on mobile by default; Mobile breakpoint (767px); useMediaQuery DevTools emulator support; Input disabled state (distinct background, border, dimmed text/icons/label/helper, dark mode); Input/Textarea/Select/etc. `labelMode` ('top' | 'floating'); Ghost variant (transparent border by default, border on hover/focus); Form components primary/secondary background swap; Number input border in CSS; Input test page consistent borders  
**Bug Fixes**: None  
**Components Updated**: Sidebar, useMediaQuery, Input, Textarea, PasswordInput, Select, NumberInput, MultiSelect  
**Dependencies Added**: None

---

## üöÄ Version: 1.0.87

**Release Date**: 2026-01-26  
**Status**: ‚úÖ Ready  
**Improvements**: Table/VirtualizedTable striped rows (2nd, 4th, 6th...); Drawer component refactored with industry-standard libraries (framer-motion, focus-trap-react, react-remove-scroll)  
**Bug Fixes**: DashboardTestPage `t()` return type (TypeScript); FileUploaderTestPage validation errors display (TypeScript); Drawer panel no longer overrides custom position/size (William Stovall, 98576bc); Sidebar safelist `translate-x-0`/`-translate-x-full` for mobile overlay  
**Components Updated**: Table, VirtualizedTable, DashboardTestPage, Drawer, Sidebar, FileUploaderTestPage  
**Dependencies Added**: framer-motion, focus-trap-react, react-remove-scroll

---

## üÜï Version 1.0.88 - Sidebar Mobile Default + Breakpoint Fix + useMediaQuery Enhancement

### ‚ú® Improvements

#### Sidebar: Hide on Mobile by Default

The Sidebar now **hides on mobile by default** (`hideOnMobile` defaults to `true`). This provides a cleaner mobile experience where the sidebar is off-screen until opened via the hamburger button.

**Breaking Change:**
- **Before**: `hideOnMobile` defaulted to `false` (sidebar visible but collapsed on mobile)
- **After**: `hideOnMobile` defaults to `true` (sidebar hidden on mobile, overlay when opened)

**Migration:**
- To show the sidebar on mobile (old behavior), explicitly set `hideOnMobile={false}`
- To use the overlay pattern (new default), pass `mobileOpen` and `onMobileOpenChange` props

#### Sidebar: Mobile Breakpoint Adjusted (767px)

The mobile breakpoint changed from `768px` to `767px` so that tablets like iPad Mini (768px width) show the sidebar instead of hiding it.

- **Before**: Mobile = `(max-width: 768px)` (iPad Mini 768px was treated as mobile)
- **After**: Mobile = `(max-width: 767px)` (iPad Mini 768px shows sidebar)

#### useMediaQuery: Enhanced DevTools Emulator Support

The `useMediaQuery` hook now better detects viewport changes in Chrome DevTools device emulator:

**New Features:**
- **Visual Viewport API**: Listens to `window.visualViewport` `resize` and `scroll` events
- **Orientation Change**: Listens to `window.orientationchange` events
- **Development Polling**: In development mode, re-checks media queries every 800ms to catch emulator dropdown changes that don't fire events

This ensures layout adapts immediately when selecting devices (e.g., iPhone 12) in the emulator without requiring manual resize or orientation toggle.

---

### Input & Form Components: Disabled State, Floating Label, Ghost, Primary/Secondary

#### Input: Stronger Disabled State (All Variants + Dark Mode)

- **Disabled styling**: Same distinct look for all variants when disabled: gray background (`bg-gray-100` / `dark:bg-gray-900`), muted border (`border-gray-300` / `dark:border-gray-700`), dimmed text and placeholder. Label, helper text, and left/right icons use reduced opacity (label/helper: 70%; icons: 60%; placeholder: 70%).
- **Dark mode**: Disabled inputs use darker background, dimmer text, and `dark:opacity-85` on the container so they clearly recede on dark UIs.
- **Cursor**: Container and input use `cursor-not-allowed` when disabled.

#### Input & Form Components: `labelMode` ('top' | 'floating')

- **Input, Textarea, PasswordInput, Select, NumberInput, MultiSelect** support `labelMode?: 'top' | 'floating'` (default `'top'`).
- **`labelMode="floating"`**: Label sits inside the field and floats up on focus or when the field has a value. Aligns with DatePicker `labelMode`. When floated, the label uses `bg-bg-primary` and `px-1` so it sits cleanly above the border.

#### Input (and similar): Ghost Variant Clarification

- **Ghost variant**: Uses transparent border by default; border appears on hover and focus so ghost is visually distinct from primary (white background).

#### Form Components: Primary vs Secondary Background Swap

- **Primary**: Now uses white background (`bg-bg-secondary`).  
- **Secondary**: Now uses light blue/tertiary (`bg-bg-tertiary`).  
- Applied to: Input, Select, Checkbox, Textarea, NumberInput, PasswordInput, MultiSelect, Slider.

#### Input: Number Input Border

- **CSS**: `.acutrack-input[type="number"]` now has `border-style: solid` and optional spinner hiding so number inputs show the same border as text inputs across browsers.

---

## üÜï Version 1.0.87 - Table Striped Rows + Drawer Refactor + Fixes

### ‚ú® Improvements

#### Table & VirtualizedTable: Striped Rows (2nd, 4th, 6th...)

Striped rows now apply to the **2nd, 4th, 6th...** data rows. The **first data row** uses the base background.

- **Table**: `even:bg-bg-tertiary/50` (was `odd:`)
- **VirtualizedTable**: `(startIndex + index) % 2 === 1` for stripes on 2nd, 4th, 6th...

#### Drawer: Comprehensive Refactor with Industry-Standard Libraries

The Drawer component has been completely refactored to use battle-tested libraries, fixing critical accessibility and UX issues:

**New Dependencies:**
- `framer-motion` - Smooth, reliable animations
- `focus-trap-react` - Robust focus management
- `react-remove-scroll` - Scroll locking without layout shifts

**Key Improvements:**
- ‚úÖ **Eliminated Layout Shifts**: `react-remove-scroll` correctly disables body scroll without altering `position` or causing content reflow
- ‚úÖ **Fixed Focus Management**: `focus-trap-react` reliably traps focus within the drawer and handles all edge cases
- ‚úÖ **Simplified Logic**: Removed complex `useState` flags and `setTimeout` race conditions, replaced with declarative `AnimatePresence`
- ‚úÖ **Preserved Scroll Position**: No more `body.style` manipulation, page scroll position naturally preserved
- ‚úÖ **Fully Backward Compatible**: All props and API remain unchanged

**Technical Changes:**
- Replaced manual DOM manipulation with `framer-motion` animations
- Replaced custom focus trap implementation with `focus-trap-react`
- Replaced `body.style.overflow` manipulation with `react-remove-scroll`
- Simplified animation logic using `AnimatePresence` and motion variants
- Improved focus restoration when drawer closes

### üêõ Bug Fixes

#### DashboardTestPage: `t()` Return Type (TypeScript)

`t()` helper now returns `string` via `getTranslation(...) ?? fallback`, fixing `string | null` errors for Header.Search, UserMenu links, VirtualizedTable columns, and labelMap.

#### FileUploaderTestPage: Validation Errors Display (TypeScript)

Fixed TypeScript errors in validation error display:
- Changed `description` prop from JSX to string
- Moved error list to `children` prop
- Updated to use correct `FileValidationError` properties: `error.file.name` and `error.errors.join(', ')`

#### Drawer: Panel No Longer Overrides Custom Position/Size

The panel's base classes no longer include hardcoded position or size. `position`, `size`, `className`, and `style` work as documented. **Contributor:** William Stovall (98576bc)

#### Sidebar: Safelist `translate-x-0` and `-translate-x-full` for Mobile Overlay

`translate-x-0` and `-translate-x-full` are used dynamically for the Sidebar mobile overlay slide-in/out. They were added to the Tailwind `safelist` so they are not purged from built CSS when `hideOnMobile` and the mobile overlay are used.

---

## üÜï Version 1.0.86 - Language Selector Enhancements + Fix

### ‚ú® New Features

#### Gender & Plural Translation Support
Enhanced `getTranslation()` helper to support gendered and pluralized translations for proper internationalization.
