# Theme-Aware Favicon Implementation Guide

## Overview

The Acutrack Design System includes theme-aware favicons that automatically switch between light and dark versions based on the user's browser/system theme preference. This guide explains how to implement the same functionality in your application.

## Available Favicon Assets

After installing the Acutrack Design System, you'll have access to these favicon assets in your `node_modules/@acutrack-bookprint/acutrack-ds/dist/assets/` directory:

### Icon Logos (Square - Best for Favicons)

| File | Theme | Use Case |
|------|-------|----------|
| `acutrack-logo-icon-light.svg` | Light Mode | Favicon for light backgrounds |
| `acutrack-logo-icon-dark.svg` | Dark Mode | Favicon for dark backgrounds |
| `acutrack-grey-icon-light.svg` | Light (Grey) | Alternative grey icon for light backgrounds |
| `acutrack-grey-icon-dark.svg` | Dark (Grey) | Alternative grey icon for dark backgrounds |

### Full Logos (Wide - Best for Headers)

| File | Theme | Use Case |
|------|-------|----------|
| `acutrack-logo-light.svg` | Light Mode | Full logo for light backgrounds |
| `acutrack-logo-dark.svg` | Dark Mode | Full logo for dark backgrounds |
| `acutrack-grey-light.svg` | Light (Grey) | Alternative grey logo for light backgrounds |
| `acutrack-grey-dark.svg` | Dark (Grey) | Alternative grey logo for dark backgrounds |

## Implementation

### Step 1: Copy Assets to Your Project

Copy the favicon assets from the design system package to your project's public/static folder:

```bash
# Using npm/yarn
cp node_modules/@acutrack-bookprint/acutrack-ds/dist/assets/acutrack-logo-icon-*.svg ./public/

# Or manually copy from dist/assets after building
```

### Step 2: Add Theme-Aware Favicons to HTML

Add the following to your HTML `<head>` section:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your App Title</title>
  
  <!-- Theme-Aware Favicons -->
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/assets/acutrack-logo-icon-light.svg" 
    media="(prefers-color-scheme: light)"
  >
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/assets/acutrack-logo-icon-dark.svg" 
    media="(prefers-color-scheme: dark)"
  >
  
  <!-- Apple Touch Icon (for iOS devices) -->
  <link rel="apple-touch-icon" href="/assets/acutrack-logo-icon-light.svg">
  
  <!-- Fallback for browsers that don't support media queries -->
  <link rel="icon" type="image/svg+xml" href="/assets/acutrack-logo-icon-light.svg">
</head>
<body>
  <!-- Your content -->
</body>
</html>
```

### Step 3: For React/Vite Projects

If you're using React with Vite, update your `index.html`:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your App</title>
  
  <!-- Theme-Aware Favicons - Vite will handle the paths -->
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/acutrack-logo-icon-light.svg" 
    media="(prefers-color-scheme: light)"
  >
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/acutrack-logo-icon-dark.svg" 
    media="(prefers-color-scheme: dark)"
  >
  <link rel="apple-touch-icon" href="/acutrack-logo-icon-light.svg">
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>
</html>
```

### Step 4: For Next.js Projects

In Next.js, add favicons to your `app/layout.tsx` or `pages/_document.tsx`:

```tsx
// app/layout.tsx (App Router)
import type { Metadata } from 'next';

export const metadata: Metadata = {
  title: 'Your App',
  icons: {
    icon: [
      {
        url: '/acutrack-logo-icon-light.svg',
        media: '(prefers-color-scheme: light)',
      },
      {
        url: '/acutrack-logo-icon-dark.svg',
        media: '(prefers-color-scheme: dark)',
      },
    ],
    apple: '/acutrack-logo-icon-light.svg',
  },
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

Or in `pages/_document.tsx` (Pages Router):

```tsx
import { Html, Head, Main, NextScript } from 'next/document';

export default function Document() {
  return (
    <Html lang="en">
      <Head>
        <link 
          rel="icon" 
          type="image/svg+xml" 
          href="/acutrack-logo-icon-light.svg" 
          media="(prefers-color-scheme: light)" 
        />
        <link 
          rel="icon" 
          type="image/svg+xml" 
          href="/acutrack-logo-icon-dark.svg" 
          media="(prefers-color-scheme: dark)" 
        />
        <link rel="apple-touch-icon" href="/acutrack-logo-icon-light.svg" />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  );
}
```

## How It Works

The `media` attribute on `<link>` elements uses CSS media queries to determine which favicon to display:

```html
<!-- Light mode favicon (when system/browser prefers light) -->
<link rel="icon" href="light.svg" media="(prefers-color-scheme: light)">

<!-- Dark mode favicon (when system/browser prefers dark) -->
<link rel="icon" href="dark.svg" media="(prefers-color-scheme: dark)">
```

### Browser Support

Theme-aware favicons using `prefers-color-scheme` are supported in:

- ✅ Chrome 76+ (July 2019)
- ✅ Firefox 67+ (May 2019)
- ✅ Safari 12.1+ (March 2019)
- ✅ Edge 79+ (January 2020)
- ⚠️ Older browsers will use the fallback favicon

## Complete Example

Here's a complete HTML template with all favicon configurations:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#1c212c" media="(prefers-color-scheme: dark)">
  <title>My Application - Acutrack Design System</title>
  
  <!-- Theme-Aware Favicons -->
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/assets/acutrack-logo-icon-light.svg" 
    media="(prefers-color-scheme: light)"
  >
  <link 
    rel="icon" 
    type="image/svg+xml" 
    href="/assets/acutrack-logo-icon-dark.svg" 
    media="(prefers-color-scheme: dark)"
  >
  
  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="/assets/acutrack-logo-icon-light.svg">
  
  <!-- Web Manifest (for PWA support) -->
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Fallback favicon for older browsers -->
  <link rel="icon" type="image/svg+xml" href="/assets/acutrack-logo-icon-light.svg">
</head>
<body>
  <div id="root"></div>
</body>
</html>
```

## Web Manifest for PWA

If you're building a Progressive Web App (PWA), include a `site.webmanifest`:

```json
{
  "name": "Your Application",
  "short_name": "YourApp",
  "icons": [
    {
      "src": "/assets/acutrack-logo-icon-light.svg",
      "sizes": "any",
      "type": "image/svg+xml",
      "purpose": "any maskable"
    }
  ],
  "theme_color": "#ffffff",
  "background_color": "#ffffff",
  "display": "standalone"
}
```

## Customizing Favicons

If you need to use custom favicons instead of Acutrack branding:

1. Create your own light and dark SVG icons
2. Place them in your public assets folder
3. Update the `href` paths in your HTML

```html
<!-- Custom favicons -->
<link rel="icon" href="/my-icon-light.svg" media="(prefers-color-scheme: light)">
<link rel="icon" href="/my-icon-dark.svg" media="(prefers-color-scheme: dark)">
```

## Troubleshooting

### Favicon Not Switching

1. **Clear browser cache**: Hard refresh with `Ctrl+Shift+R` (Windows) or `Cmd+Shift+R` (Mac)
2. **Check path**: Ensure favicon paths are correct and files exist
3. **Check media query**: Verify `media` attribute syntax is correct
4. **Browser DevTools**: Check Network tab for favicon loading

### Favicon Not Showing at All

1. **Check file type**: Ensure favicons are valid SVG files
2. **Check MIME type**: Server should serve `.svg` files as `image/svg+xml`
3. **Check file permissions**: Ensure files are readable
4. **Try absolute path**: Use full URL path if relative paths don't work

### Testing Theme Switching

To test theme switching without changing system settings:

1. **Chrome DevTools**: 
   - Open DevTools → Rendering → Emulate CSS media → `prefers-color-scheme`

2. **Firefox DevTools**: 
   - Open DevTools → Settings → Enable "Toggle dark mode"

3. **System Settings**: 
   - Change your OS appearance settings to Light/Dark mode

## Best Practices

1. **Use SVG Format**: SVG favicons are scalable and look crisp at any size
2. **Keep Icons Simple**: Favicons are small, use simple, recognizable designs
3. **Test Both Themes**: Always verify both light and dark favicons work correctly
4. **Provide Fallback**: Include a fallback favicon for older browsers
5. **Match Brand Colors**: Ensure favicons match your brand identity in both themes

## Related Documentation

- [Acutrack Design System Assets Guide](./ACUTRACK_DS_ASSETS_GUIDE.md)
- [Theme Implementation Guide](./THEME_IMPLEMENTATION_GUIDE.md)
- [Icon System Guide](./COMPREHENSIVE_ICON_GUIDE.md)

## Support

For additional support and examples, visit our [Component Test Hub](http://localhost:5175/component-test-hub.html) to see theme-aware favicons in action across all test pages.

