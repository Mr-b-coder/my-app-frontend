# üåô Acutrack Design System - Theme Implementation Guide

## Overview

The Acutrack Design System provides comprehensive dark and light mode support using Tailwind CSS class-based dark mode. This guide covers everything you need to implement themes in your applications.

## üöÄ Quick Start

### 1. Install the Design System

```bash
npm install @acutrack-bookprint/acutrack-ds
```

### 2. Import Required Files

```tsx
import '@acutrack-bookprint/acutrack-ds/dist/style.css';
import { ThemeToggle } from '@acutrack-bookprint/acutrack-ds';
```

### 3. Add Theme Toggle to Your App

```tsx
import React from 'react';
import { ThemeToggle } from '@acutrack-bookprint/acutrack-ds';

function App() {
  return (
    <div className="min-h-screen bg-bg-primary dark:bg-dark-bg-primary">
      <header className="bg-bg-secondary dark:bg-dark-bg-secondary p-4">
        <div className="flex justify-between items-center">
          <h1 className="text-text-primary dark:text-dark-text-primary">My App</h1>
          <ThemeToggle />
        </div>
      </header>
      
      <main className="p-8">
        <div className="bg-bg-secondary dark:bg-dark-bg-secondary rounded-lg p-6">
          <h2 className="text-2xl font-bold text-text-primary dark:text-dark-text-primary mb-4">
            Welcome to My App
          </h2>
          <p className="text-text-secondary dark:text-dark-text-secondary">
            This app supports both light and dark themes!
          </p>
        </div>
      </main>
    </div>
  );
}
```

## üé® Color System

### Light Mode Colors

| Category | Color | Value | Usage |
|----------|-------|-------|-------|
| **Text** | Primary | `#1B3A7B` | Main headings, important text |
| | Secondary | `#3C4858` | Body text, descriptions |
| | Tertiary | `#6B7280` | Muted text, captions |
| **Background** | Primary | `#f6f7fa` | Main app background |
| | Secondary | `#FFFFFF` | Card backgrounds, modals |
| | Tertiary | `#ebeff9` | Subtle backgrounds, hover states |
| **Border** | Default | `#DFE4E9` | Card borders, dividers |
| | Strong | `#5fead4` | Focus states, accents |

### Dark Mode Colors

| Category | Color | Value | Usage |
|----------|-------|-------|-------|
| **Text** | Primary | `#F6F8FD` | Main headings, important text |
| | Secondary | `#9CA3AF` | Body text, descriptions |
| | Tertiary | `#6B7280` | Muted text, captions |
| **Background** | Primary | `#1c212c` | Main app background |
| | Secondary | `#101620` | Card backgrounds, modals |
| | Tertiary | `#1e2a3a` | Subtle backgrounds, hover states |
| **Border** | Default | `#1c3332` | Card borders, dividers |
| | Strong | `#ffffff` | Focus states, accents |

## üõ†Ô∏è Implementation Patterns

### Basic Component with Theme Support

```tsx
const Card = ({ children, className = "" }) => (
  <div className={`
    bg-bg-secondary dark:bg-dark-bg-secondary
    border border-border-color dark:border-dark-border-color
    text-text-primary dark:text-dark-text-primary
    rounded-lg p-6 shadow-sm
    ${className}
  `}>
    {children}
  </div>
);
```

### Button with Theme-Aware Colors

```tsx
const Button = ({ variant = "primary", children, ...props }) => {
  const baseClasses = "px-4 py-2 rounded font-medium transition-colors";
  
  const variantClasses = {
    primary: "bg-brand-orange text-white hover:bg-brand-orange-hover dark:bg-dark-brand-orange dark:hover:bg-dark-brand-orange-hover",
    secondary: "bg-bg-tertiary text-brand-navy hover:bg-bg-secondary dark:bg-dark-bg-tertiary dark:text-dark-brand-navy dark:hover:bg-dark-bg-secondary",
    outline: "border border-brand-navy text-brand-navy hover:bg-brand-navy hover:text-white dark:border-dark-brand-navy dark:text-dark-brand-navy dark:hover:bg-dark-brand-navy dark:hover:text-white"
  };
  
  return (
    <button className={`${baseClasses} ${variantClasses[variant]}`} {...props}>
      {children}
    </button>
  );
};
```

### Form Input with Theme Support

```tsx
const Input = ({ className = "", ...props }) => (
  <input
    className={`
      w-full px-3 py-2
      bg-bg-secondary dark:bg-dark-bg-secondary
      border border-border-color dark:border-dark-border-color
      text-text-primary dark:text-dark-text-primary
      placeholder:text-text-secondary dark:placeholder:text-dark-text-secondary
      focus:outline-none focus:ring-2 focus:ring-brand-orange
      rounded-md
      ${className}
    `}
    {...props}
  />
);
```

## üéØ Advanced Usage

### Custom Theme Toggle Implementation

```tsx
import React, { useState, useEffect } from 'react';
import { Button } from '@acutrack-bookprint/acutrack-ds';
import { Icon } from '@acutrack-bookprint/acutrack-ds';

export const CustomThemeToggle = ({ className = "" }) => {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  // Initialize theme from localStorage and system preference
  useEffect(() => {
    const storedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;
    if (storedTheme && (storedTheme === 'light' || storedTheme === 'dark')) {
      setTheme(storedTheme);
    } else {
      const prefersDark = window.matchMedia && 
        window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(prefersDark ? 'dark' : 'light');
    }
  }, []);

  // Apply theme to document
  const applyTheme = (themeToApply: 'light' | 'dark') => {
    const html = document.documentElement;
    html.classList.toggle('dark', themeToApply === 'dark');
    html.classList.toggle('light', themeToApply === 'light');
  };

  // Theme toggle handler
  const handleThemeToggle = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    applyTheme(newTheme);
    localStorage.setItem('theme', newTheme);
  };

  // Apply theme when it changes
  useEffect(() => {
    applyTheme(theme);
  }, [theme]);

  return (
    <Button
      variant="text"
      size="sm"
      onClick={handleThemeToggle}
      className={`p-2 text-text-primary dark:text-dark-text-primary hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary ${className}`}
      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} theme`}
    >
      <div className="flex items-center space-x-2">
        <Icon className="w-5 h-5">
          {theme === 'light' ? 'dark_mode' : 'light_mode'}
        </Icon>
        <span className="text-sm font-medium capitalize">
          {theme === 'light' ? 'Light' : 'Dark'}
        </span>
      </div>
    </Button>
  );
};
```

### Complete App with Theme Support

```tsx
import React, { useState, useEffect } from 'react';
import { ThemeToggle, Button, Card, Input } from '@acutrack-bookprint/acutrack-ds';

const App = () => {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const storedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;
    if (storedTheme) {
      setTheme(storedTheme);
    } else {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(prefersDark ? 'dark' : 'light');
    }
  }, []);

  useEffect(() => {
    document.documentElement.classList.toggle('dark', theme === 'dark');
  }, [theme]);

  return (
    <div className="min-h-screen bg-bg-primary dark:bg-dark-bg-primary">
      <header className="bg-bg-secondary dark:bg-dark-bg-secondary border-b border-border-color dark:border-dark-border-color">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16">
            <h1 className="text-xl font-semibold text-text-primary dark:text-dark-text-primary">
              My App
            </h1>
            <ThemeToggle />
          </div>
        </div>
      </header>
      
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <Card>
            <h2 className="text-2xl font-bold text-text-primary dark:text-dark-text-primary mb-4">
              Welcome to My App
            </h2>
            <p className="text-text-secondary dark:text-dark-text-secondary mb-6">
              This app supports both light and dark themes with automatic system preference detection.
            </p>
            <div className="space-y-4">
              <Input placeholder="Enter your name" />
              <div className="flex gap-3">
                <Button variant="primary">Primary Action</Button>
                <Button variant="secondary">Secondary Action</Button>
              </div>
            </div>
          </Card>
          
          <Card>
            <h3 className="text-lg font-semibold text-text-primary dark:text-dark-text-primary mb-4">
              Theme Features
            </h3>
            <ul className="space-y-2 text-text-secondary dark:text-dark-text-secondary">
              <li>‚Ä¢ Automatic system preference detection</li>
              <li>‚Ä¢ Persistent theme selection</li>
              <li>‚Ä¢ Smooth transitions between themes</li>
              <li>‚Ä¢ Accessible theme toggle</li>
              <li>‚Ä¢ All components support both themes</li>
            </ul>
          </Card>
        </div>
      </main>
    </div>
  );
};

export default App;
```

## üé® Tailwind Configuration

### Required Tailwind Config

```javascript
// tailwind.config.js
export default {
  content: ["./src/**/*.{js,ts,jsx,tsx}"],
  darkMode: 'class', // Enable class-based dark mode
  theme: {
    extend: {
      colors: {
        // Light mode colors
        'text-primary': '#1B3A7B',
        'text-secondary': '#3C4858',
        'text-tertiary': '#6B7280',
        'bg-primary': '#f6f7fa',
        'bg-secondary': '#FFFFFF',
        'bg-tertiary': '#ebeff9',
        'border-color': '#DFE4E9',
        
        // Dark mode colors
        'dark-text-primary': '#F6F8FD',
        'dark-text-secondary': '#9CA3AF',
        'dark-text-tertiary': '#6B7280',
        'dark-bg-primary': '#1c212c',
        'dark-bg-secondary': '#101620',
        'dark-bg-tertiary': '#1e2a3a',
        'dark-border-color': '#1c3332',
        
        // Brand colors
        'brand-navy': '#1B3A7B',
        'brand-orange': '#0d9488',
        'brand-orange-hover': '#0a6960',
        'dark-brand-navy': '#53e3cb',
        'dark-brand-orange': '#0d9488',
        'dark-brand-orange-hover': '#5eead4',
      }
    }
  }
}
```

## ‚úÖ Best Practices

### 1. Always Provide Both Light and Dark Variants

```tsx
// ‚úÖ Good
<div className="bg-bg-secondary dark:bg-dark-bg-secondary text-text-primary dark:text-dark-text-primary">

// ‚ùå Bad
<div className="bg-white text-black">
```

### 2. Use Semantic Color Names

```tsx
// ‚úÖ Good
className="text-text-primary dark:text-dark-text-primary"

// ‚ùå Bad
className="text-blue-900 dark:text-blue-100"
```

### 3. Test Contrast Ratios

Ensure all color combinations meet WCAG AA contrast requirements in both themes.

### 4. Provide Smooth Transitions

```css
/* Add to your global CSS */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
```

### 5. Group Related Theme Styles

```tsx
// ‚úÖ Good - grouped together
<div className="
  bg-bg-secondary dark:bg-dark-bg-secondary
  border border-border-color dark:border-dark-border-color
  text-text-primary dark:text-dark-text-primary
  rounded-lg p-6
">

// ‚ùå Bad - scattered
<div className="
  bg-bg-secondary rounded-lg
  dark:bg-dark-bg-secondary
  text-text-primary p-6
  dark:text-dark-text-primary
  border border-border-color
  dark:border-dark-border-color
">
```

## üß™ Testing

### Manual Testing Checklist

- [ ] Theme toggle functionality works
- [ ] Theme persists after page refresh
- [ ] System preference detection works
- [ ] All components look correct in both themes
- [ ] Smooth transitions between themes
- [ ] Accessibility with screen readers
- [ ] Keyboard navigation works in both themes

### Automated Testing Example

```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { ThemeToggle } from '@acutrack-bookprint/acutrack-ds';

test('toggles theme correctly', () => {
  render(<ThemeToggle />);
  
  const toggleButton = screen.getByRole('button');
  expect(toggleButton).toHaveAttribute('aria-label', 'Switch to dark theme');
  
  fireEvent.click(toggleButton);
  expect(toggleButton).toHaveAttribute('aria-label', 'Switch to light theme');
  expect(document.documentElement).toHaveClass('dark');
});
```

## üêõ Troubleshooting

### Common Issues and Solutions

| Issue | Solution |
|-------|----------|
| Theme not persisting after page refresh | Ensure localStorage is available and theme is saved on toggle |
| System preference not detected | Check if matchMedia is supported and handle gracefully |
| Dark mode styles not applying | Verify darkMode: "class" is set in Tailwind config and dark class is on html element |
| Flickering during theme switch | Apply theme before rendering components or use CSS transitions |
| Some components not theme-aware | Add dark: variants to all color-related classes |

## üìö Additional Resources

- [Tailwind CSS Dark Mode Documentation](https://tailwindcss.com/docs/dark-mode)
- [WCAG Color Contrast Guidelines](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html)
- [Acutrack Design System Documentation](./dist/docs/)
- [Component Examples](./dist/test-pages/)

## ü§ù Contributing

If you find issues with the theme system or have suggestions for improvements, please:

1. Check the existing issues
2. Create a new issue with detailed description
3. Follow the contribution guidelines
4. Test your changes in both light and dark modes

---

**Happy theming! üåô‚ú®**





