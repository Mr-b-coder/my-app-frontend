# CSS Minification Warning Fix - v1.0.74+

## Overview

This document provides information about the CSS minification warning fix in v1.0.74+ and workarounds for client applications.

## The Issue

When building client applications that import `@acutrack-bookprint/acutrack-ds`, you may encounter a CSS minification warning:

```
▲ [WARNING] Expected identifier but found "-" [css-syntax-error]

    <stdin>:14892:2:
      14892 │   -: =;
            ╵   ^
```

## Status in v1.0.74+

**This issue has been addressed in v1.0.74+** through improved CSS processing. However, if you still encounter this warning, use the workarounds below.

## Impact

- ✅ **Non-Fatal**: Build completes successfully
- ✅ **No Runtime Impact**: Invalid CSS is ignored by browsers
- ✅ **No Functionality Impact**: Application works correctly
- ⚠️ **Warning Only**: Cosmetic warning during build

## Workarounds for Client Applications

### Solution 1: Suppress Warning in Vite Config (Recommended)

Add this to your `vite.config.ts`:

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  build: {
    rollupOptions: {
      onwarn(warning, warn) {
        // Suppress CSS syntax warnings from esbuild
        if (warning.code === 'css-syntax-error' && warning.message?.includes('Expected identifier but found "-"')) {
          return
        }
        warn(warning)
      }
    }
  }
})
```

### Solution 2: Use Different CSS Minifier

Configure Vite to use a different CSS minifier:

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  build: {
    cssMinify: 'lightningcss', // Alternative CSS minifier
    minify: 'esbuild',
  }
})
```

### Solution 3: Update Design System Package

Ensure you're using the latest version:

```bash
npm update @acutrack-bookprint/acutrack-ds
```

## Verification

After applying a workaround:

1. **Build your application**:
   ```bash
   npm run build
   ```

2. **Verify**:
   - Build completes successfully
   - No CSS syntax warnings (or warnings are suppressed)
   - Application works correctly
   - Styling appears normal

## Technical Details

The warning occurs when esbuild minifies CSS and encounters malformed CSS properties. The design system's CSS is processed through Tailwind CSS and PostCSS, which may occasionally generate edge-case CSS that esbuild's minifier flags as invalid.

The invalid CSS (`-: =;`) is automatically ignored by browsers and does not affect functionality.

## Related Files

- `vite.config.ts` - Build configuration
- `src/index.css` - CSS imports
- `package.json` - Dependencies
- `@acutrack-bookprint/acutrack-ds/dist/style.css` - Design system CSS

## Support

If the warning persists after trying the workarounds:

1. **Check Design System Version**: Ensure you're using v1.0.74 or later
2. **Clear Build Cache**: `rm -rf dist .vite node_modules/.vite`
3. **Reinstall Dependencies**: `rm -rf node_modules && npm install`
4. **Report Issue**: If the problem continues, report it with:
   - Package version
   - Build tool version (Vite/esbuild)
   - Full warning message
   - Steps to reproduce

## Changelog

| Version | Status |
|---------|--------|
| v1.0.74+ | Improved CSS processing to reduce minification warnings |
| v1.0.73 | Known issue documented |

